var currentWinningItem,items2={item0:{weapon:"Classic Knife",name:"Classic Knife Safari Mesh",skin:"Mudder",color:"gold",imgDist:"../dist/img/weapons/knives/classic/safari-mesh.jpg",price:175,id:9},item1:{weapon:"Talon",name:"Talon Tiget Tooth",skin:"Mudder",color:"gold",imgDist:"../dist/img/weapons/knives/talon/tiger-tooth.jpg",price:611.78,id:10}},spinBtn=document.querySelector(".spin"),caseItemsBox=document.querySelector(".case__items"),countItemsAmount=Object.keys(items2).length,winPupup=document.querySelector(".win-popup"),sellBtn=document.querySelector(".win-popup__btn--sell"),takeBtn=document.querySelector(".win-popup__btn--take"),winningItemImg=document.querySelector(".win-popup__img"),winningItemName=document.querySelector(".win-popup__item-name"),winningItemPrice=document.querySelector(".win-popup__item-price"),balanceAmount=document.querySelector(".user__balance--amount"),balanceAmountMobile=document.querySelector(".user-mobile__balance--amount"),casePrice=400,createItemsInChest=function(){for(i=0;i<30;i++){var e=document.createElement("div"),t=document.createElement("img"),n=document.createElement("p"),a=document.createElement("p"),o=(e.classList.add("case__item"),t.classList.add("case__img"),n.classList.add("case__item-name"),a.classList.add("case__skin-name"),Math.random()<.5?0:1);t.setAttribute("src",items2["item".concat(o)].imgDist),t.setAttribute("alt",items2["item".concat(o)].name),n.textContent=items2["item".concat(o)].weapon,a.textContent=items2["item".concat(o)].skin,e.id="item".concat(o),e.append(t,n,a),caseItemsBox.append(e)}},setBtnText=function(){parseFloat(localStorage.getItem("Balance").slice(0,-1))>=casePrice?spinBtn.textContent="open ".concat(casePrice,".00$"):spinBtn.textContent="add balance"},spinCase=function(){var e,t;parseFloat(localStorage.getItem("Balance").slice(0,-1))>=casePrice&&"spining"!==spinBtn.textContent?(e=Math.floor(1e3*Math.random()-2e3),spinBtn.textContent="spining",t=(parseFloat(localStorage.getItem("Balance").slice(0,-1))-casePrice).toFixed(2),localStorage.setItem("Balance",t+"$"),setBalance(),caseItemsBox.style.left=e+"px",caseItemsBox.style.transition="left 5s ease",setTimeout(function(){var n=document.querySelector(".case__middle-point").getBoundingClientRect().x;e=document.querySelectorAll(".case__item"),i=null,a=1/0,e.forEach(function(e){var t=e.getBoundingClientRect().x+e.offsetWidth/2,t=Math.abs(t-n);t<a&&(a=t,i=e)});var i,a,e=i;e&&(currentWinningItem=e,winningItemImg.setAttribute("src",items2["".concat(e.id)].imgDist),winningItemImg.setAttribute("alt",items2["".concat(e.id)].name),winningItemName.textContent=items2["".concat(e.id)].name,winningItemPrice.textContent=items2["".concat(e.id)].price,hideWinPopup())},5e3)):"spining"!==spinBtn.textContent&&window.open("../diff/deposit.html","_self")},hideWinPopup=function(){winPupup.classList.toggle("hidden"),setBtnText(),resetBoxAnimation()},sellWinningItem=function(){var e=(parseFloat(localStorage.getItem("Balance").slice(0,-1))+parseFloat(winningItemPrice.textContent)).toFixed(2);localStorage.setItem("Balance",e+"$"),hideWinPopup(),refreshBalance()},takeWinningItem=function(){var e="id"+items2["".concat(currentWinningItem.id)].id;null===localStorage.getItem(e)||NaN===localStorage.getItem(e)?localStorage.setItem(e,1):localStorage.setItem(e,parseInt(localStorage.getItem(e))+1),hideWinPopup()},refreshBalance=function(){balanceAmount.textContent=localStorage.getItem("Balance"),balanceAmountMobile.textContent=localStorage.getItem("Balance")},resetBoxAnimation=function(){caseItemsBox.innerHTML="",caseItemsBox.style.transition="0.01s",caseItemsBox.style.left="-3950px",createItemsInChest()};spinBtn.addEventListener("click",spinCase),takeBtn.addEventListener("click",takeWinningItem),sellBtn.addEventListener("click",sellWinningItem),createItemsInChest(),setBtnText();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhc2VzL3RpZ2VydG9vdGguanMiXSwibmFtZXMiOlsiY3JlYXRlSXRlbXNJbkNoZXN0IiwiaXRlbXMyIiwiaXRlbTAiLCJ3ZWFwb24iLCJza2luIiwiY29sb3IiLCJpbWdEaXN0IiwicHJpY2UiLCJpZCIsIml0ZW0xIiwic3BpbkJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNhc2VJdGVtc0JveCIsImxlbmd0aCIsImNvdW50SXRlbXNBbW91bnQiLCJPYmplY3QiLCJ3aW5QdXB1cCIsInNlbGxCdG4iLCJ0YWtlQnRuIiwid2lubmluZ0l0ZW1JbWciLCJ3aW5uaW5nSXRlbU5hbWUiLCJ3aW5uaW5nSXRlbVByaWNlIiwiYmFsYW5jZUFtb3VudCIsImN1cnJlbnRXaW5uaW5nSXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJpIiwiaXRlbUltZyIsIml0ZW1JdGVtTmFtZSIsIml0ZW1Ta2luTmFtZSIsImFkZCIsIml0ZW0iLCJjbGFzc0xpc3QiLCJyYW5kb21JdGVtIiwicmFuZG9tIiwic2V0QXR0cmlidXRlIiwiY29uY2F0IiwidGV4dENvbnRlbnQiLCJuYW1lIiwic2V0QnRuVGV4dCIsInBhcnNlRmxvYXQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2xpY2UiLCJjYXNlUHJpY2UiLCJzcGluQ2FzZSIsImJhbGFuY2VBZnRlck9wZW5pbmciLCJob3dTdHJvbmdTcGluIiwiTWF0aCIsImZsb29yIiwibGVmdCIsInRvRml4ZWQiLCJyZWRMaW5lWCIsImdldFdpbm5pbmdJdGVtIiwic2V0QmFsYW5jZSIsIml0ZW1zIiwiZm9yRWFjaCIsIml0ZW1DZW50ZXJYIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwic2V0VGltZW91dCIsImNsb3Nlc3REaXN0YW5jZSIsImNsb3Nlc3RJdGVtIiwieCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJoaWRlV2luUG9wdXAiLCJkaXN0YW5jZSIsIndpbmRvdyIsInJlc2V0Qm94QW5pbWF0aW9uIiwid2lubmluZ0l0ZW0iLCJzZWxsV2lubmluZ0l0ZW0iLCJjdXJyZW50QmFsYW5jZSIsImhvd011Y2hUb0FkZFRvQmFsYW5jZSIsIml0ZW1QcmljZSIsInNldEl0ZW0iLCJ0YWtlV2lubmluZ0l0ZW0iLCJpZE51bWJlciIsInRvZ2dsZSIsImJhbGFuY2VBbW91bnRNb2JpbGUiLCJzdHlsZSIsInRyYW5zaXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiTmFOIiwicGFyc2VJbnQiLCJyZWZyZXNoQmFsYW5jZSIsImlubmVySFRNTCJdLCJtYXBwaW5ncyI6IkFBQUEsSUFxQ01BLG1CQXJDQUMsT0FBUyxDQUNkQyxNQUFPLENBRFJDLE9BQVksZ0JBQ1hELEtBQUssNEJBR0pFLEtBRkFELFNBR0FFLE1BRkksT0FHSkMsUUFGTSxxREFHTkMsTUFGSyxJQUdMQyxHQUZBRixDQUdELEVBQ0FHLE1BRkssQ0FDTE4sT0FBQyxRQUNETSxLQUFLLG9CQUdKTCxLQUZBRCxTQUdBRSxNQUZJLE9BR0pDLFFBRk0sbURBR05DLE1BRkssT0FHTEMsR0FGQUYsRUFHRCxDQUNELEVBQUNJLFFBQUFDLFNBQUFDLGNBQUEsT0FBQSxFQUVLRixhQUFVQyxTQUFTQyxjQUFxQixjQUFDLEVBQ3pDQyxpQkFBZUYsT0FBU0MsS0FBQUEsTUFBYyxFQUFBRSxPQUN0Q0MsU0FBQUEsU0FBbUJDLGNBQVlmLFlBQWMsRUFDN0NnQixRQUFXTixTQUFTQyxjQUFjLHVCQUFhLEVBQy9DTSxRQUFVUCxTQUFTQyxjQUFjLHVCQUF3QixFQUN6RE8sZUFBbUJQLFNBQUFBLGNBQWMsaUJBQXdCLEVBQ3pEUSxnQkFBaUJULFNBQVNDLGNBQWMsdUJBQWtCLEVBQzFEUyxpQkFBa0JWLFNBQVNDLGNBQWMsd0JBQXdCLEVBQ2pFVSxjQUFnQlgsU0FBV0MsY0FBYyx3QkFBQyxFQUMxQ1csb0JBQXdCWixTQUFDQyxjQUMvQiwrQkFHQSxFQUNJWSxVQUFBQSxJQUlGeEIsbUJBQXNCeUIsV0FEdkIsSUFFQ0MsRUFBTUMsRUFBQUEsRUFBTyxHQUFHaEIsQ0FBQUEsR0FBUSxDQUR4QixJQUVNaUIs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QVNYLGVBQWUsRUFFakRyRSxtQkFBbUIsRUFDbkJ1QyxXQUFXIiwiZmlsZSI6ImNhc2VzL3RpZ2VydG9vdGgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXRlbXMyID0ge1xyXG5cdGl0ZW0wOiB7XHJcblx0XHR3ZWFwb246IFwiQ2xhc3NpYyBLbmlmZVwiLFxyXG5cdFx0bmFtZTogXCJDbGFzc2ljIEtuaWZlIFNhZmFyaSBNZXNoXCIsXHJcblx0XHRza2luOiBcIk11ZGRlclwiLFxyXG5cdFx0Y29sb3I6IFwiZ29sZFwiLFxyXG5cdFx0aW1nRGlzdDogXCIuLi9kaXN0L2ltZy93ZWFwb25zL2tuaXZlcy9jbGFzc2ljL3NhZmFyaS1tZXNoLmpwZ1wiLFxyXG5cdFx0cHJpY2U6IDE3NS4wMCxcclxuXHRcdGlkOiA5LFxyXG5cdH0sXHJcblx0aXRlbTE6IHtcclxuXHRcdHdlYXBvbjogXCJUYWxvblwiLFxyXG5cdFx0bmFtZTogXCJUYWxvbiBUaWdldCBUb290aFwiLFxyXG5cdFx0c2tpbjogXCJNdWRkZXJcIixcclxuXHRcdGNvbG9yOiBcImdvbGRcIixcclxuXHRcdGltZ0Rpc3Q6IFwiLi4vZGlzdC9pbWcvd2VhcG9ucy9rbml2ZXMvdGFsb24vdGlnZXItdG9vdGguanBnXCIsXHJcblx0XHRwcmljZTogNjExLjc4LFxyXG5cdFx0aWQ6IDEwLFxyXG5cdH0sXHJcbn07XHJcblxyXG5jb25zdCBzcGluQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zcGluXCIpO1xyXG5jb25zdCBjYXNlSXRlbXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhc2VfX2l0ZW1zXCIpO1xyXG5jb25zdCBjb3VudEl0ZW1zQW1vdW50ID0gT2JqZWN0LmtleXMoaXRlbXMyKS5sZW5ndGg7XHJcbmNvbnN0IHdpblB1cHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tcG9wdXBcIik7XHJcbmNvbnN0IHNlbGxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cF9fYnRuLS1zZWxsXCIpO1xyXG5jb25zdCB0YWtlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tcG9wdXBfX2J0bi0tdGFrZVwiKTtcclxuY29uc3Qgd2lubmluZ0l0ZW1JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cF9faW1nXCIpO1xyXG5jb25zdCB3aW5uaW5nSXRlbU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cF9faXRlbS1uYW1lXCIpO1xyXG5jb25zdCB3aW5uaW5nSXRlbVByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tcG9wdXBfX2l0ZW0tcHJpY2VcIik7XHJcbmNvbnN0IGJhbGFuY2VBbW91bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX2JhbGFuY2UtLWFtb3VudFwiKTtcclxuY29uc3QgYmFsYW5jZUFtb3VudE1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIudXNlci1tb2JpbGVfX2JhbGFuY2UtLWFtb3VudFwiXHJcbik7XHJcbmNvbnN0IGNhc2VQcmljZSA9IDQwMC4wMDtcclxubGV0IGN1cnJlbnRXaW5uaW5nSXRlbTtcclxuXHJcbmNvbnN0IGNyZWF0ZUl0ZW1zSW5DaGVzdCA9ICgpID0+IHtcclxuXHRmb3IgKGkgPSAwOyBpIDwgMzA7IGkrKykge1xyXG5cdFx0Y29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRjb25zdCBpdGVtSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuXHRcdGNvbnN0IGl0ZW1JdGVtTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cdFx0Y29uc3QgaXRlbVNraW5OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRpdGVtLmNsYXNzTGlzdC5hZGQoXCJjYXNlX19pdGVtXCIpO1xyXG5cdFx0aXRlbUltZy5jbGFzc0xpc3QuYWRkKFwiY2FzZV9faW1nXCIpO1xyXG5cdFx0aXRlbUl0ZW1OYW1lLmNsYXNzTGlzdC5hZGQoXCJjYXNlX19pdGVtLW5hbWVcIik7XHJcblx0XHRpdGVtU2tpbk5hbWUuY2xhc3NMaXN0LmFkZChcImNhc2VfX3NraW4tbmFtZVwiKTtcclxuXHJcblx0XHRjb25zdCByYW5kb21JdGVtID0gTWF0aC5yYW5kb20oKSA8IDAuNSA/IDAgOiAxO1xyXG5cclxuXHRcdGl0ZW1JbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIGl0ZW1zMltgaXRlbSR7cmFuZG9tSXRlbX1gXS5pbWdEaXN0KTtcclxuXHRcdGl0ZW1JbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGl0ZW1zMltgaXRlbSR7cmFuZG9tSXRlbX1gXS5uYW1lKTtcclxuXHRcdGl0ZW1JdGVtTmFtZS50ZXh0Q29udGVudCA9IGl0ZW1zMltgaXRlbSR7cmFuZG9tSXRlbX1gXS53ZWFwb247XHJcblx0XHRpdGVtU2tpbk5hbWUudGV4dENvbnRlbnQgPSBpdGVtczJbYGl0ZW0ke3JhbmRvbUl0ZW19YF0uc2tpbjtcclxuXHJcblx0XHQvLyBpdGVtLmlkID0gYGlkJHtpdGVtczJbYGl0ZW0ke3JhbmRvbUl0ZW19YF0uaWR9YDtcclxuXHRcdGl0ZW0uaWQgPSBgaXRlbSR7cmFuZG9tSXRlbX1gO1xyXG5cdFx0aXRlbS5hcHBlbmQoaXRlbUltZywgaXRlbUl0ZW1OYW1lLCBpdGVtU2tpbk5hbWUpO1xyXG5cdFx0Y2FzZUl0ZW1zQm94LmFwcGVuZChpdGVtKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBzZXRCdG5UZXh0ID0gKCkgPT4ge1xyXG5cdGlmIChwYXJzZUZsb2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKS5zbGljZSgwLCAtMSkpID49IGNhc2VQcmljZSkge1xyXG5cdFx0c3BpbkJ0bi50ZXh0Q29udGVudCA9IGBvcGVuICR7Y2FzZVByaWNlfS4wMCRgO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzcGluQnRuLnRleHRDb250ZW50ID0gXCJhZGQgYmFsYW5jZVwiO1xyXG5cdH1cclxufTtcclxuXHJcbi8vIEZ1bmtjamEgb2Rwb3dpZWR6aWFsbmEgemEgbG9zb3dlIHByemVzdW5pxJljaWVcclxuY29uc3Qgc3BpbkNhc2UgPSAoKSA9PiB7XHJcblx0aWYgKHBhcnNlRmxvYXQobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpLnNsaWNlKDAsIC0xKSkgPj0gY2FzZVByaWNlICYmIHNwaW5CdG4udGV4dENvbnRlbnQgIT09IFwic3BpbmluZ1wiKSB7XHJcblx0XHQvLyBMb3Nvd2UgcHJ6ZXN1bmnEmWNpZSBtacSZZHp5IC0yMDAwIGEgLTEwMDAgcHhcclxuXHRcdGNvbnN0IGhvd1N0cm9uZ1NwaW4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwIC0gMjAwMCk7XHJcblxyXG5cdFx0c3BpbkJ0bi50ZXh0Q29udGVudCA9IFwic3BpbmluZ1wiO1xyXG5cdFx0XHJcblxyXG5cdFx0Y29uc3QgYmFsYW5jZUFmdGVyT3BlbmluZyA9IChcclxuXHRcdFx0cGFyc2VGbG9hdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkJhbGFuY2VcIikuc2xpY2UoMCwgLTEpKSAtIGNhc2VQcmljZVxyXG5cdFx0KS50b0ZpeGVkKDIpO1xyXG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJCYWxhbmNlXCIsIGJhbGFuY2VBZnRlck9wZW5pbmcgKyBcIiRcIik7XHJcblx0XHRzZXRCYWxhbmNlKCk7XHJcblxyXG5cdFx0Ly8gVXN0YXdpZW5pZSBwcnplc3VuacSZY2lhIGVsZW1lbnTDs3cgeiBhbmltYWNqxIVcclxuXHRcdGNhc2VJdGVtc0JveC5zdHlsZS5sZWZ0ID0gaG93U3Ryb25nU3BpbiArIFwicHhcIjtcclxuXHRcdGNhc2VJdGVtc0JveC5zdHlsZS50cmFuc2l0aW9uID0gXCJsZWZ0IDVzIGVhc2VcIjtcclxuXHJcblx0XHQvLyBQbyB6YWtvxYRjemVuaXUgYW5pbWFjamkgcG8gNSBzZWt1bmRhY2gsIHpuYWpkxbogend5Y2nEmXNraSBlbGVtZW50XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0Y29uc3QgcmVkTGluZVggPSBkb2N1bWVudFxyXG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yKFwiLmNhc2VfX21pZGRsZS1wb2ludFwiKVxyXG5cdFx0XHRcdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54O1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2V0V2lubmluZ0l0ZW0oKSB7XHJcblx0XHRcdFx0Y29uc3QgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhc2VfX2l0ZW1cIik7XHJcblx0XHRcdFx0bGV0IGNsb3Nlc3RJdGVtID0gbnVsbDtcclxuXHRcdFx0XHRsZXQgY2xvc2VzdERpc3RhbmNlID0gSW5maW5pdHk7XHJcblxyXG5cdFx0XHRcdGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGl0ZW1DZW50ZXJYID1cclxuXHRcdFx0XHRcdFx0aXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54ICsgaXRlbS5vZmZzZXRXaWR0aCAvIDI7XHJcblx0XHRcdFx0XHRjb25zdCBkaXN0YW5jZSA9IE1hdGguYWJzKGl0ZW1DZW50ZXJYIC0gcmVkTGluZVgpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChkaXN0YW5jZSA8IGNsb3Nlc3REaXN0YW5jZSkge1xyXG5cdFx0XHRcdFx0XHRjbG9zZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuXHRcdFx0XHRcdFx0Y2xvc2VzdEl0ZW0gPSBpdGVtO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gY2xvc2VzdEl0ZW07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFpuYWpkxbogd3lncnl3YWrEhWN5IGVsZW1lbnQgaSB6bWllxYQgamVnbyBrb2xvclxyXG5cdFx0XHRjb25zdCB3aW5uaW5nSXRlbSA9IGdldFdpbm5pbmdJdGVtKCk7XHJcblx0XHRcdGlmICh3aW5uaW5nSXRlbSkge1xyXG5cdFx0XHRcdGN1cnJlbnRXaW5uaW5nSXRlbSA9IHdpbm5pbmdJdGVtO1xyXG5cdFx0XHRcdHdpbm5pbmdJdGVtSW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBpdGVtczJbYCR7d2lubmluZ0l0ZW0uaWR9YF0uaW1nRGlzdCk7XHJcblx0XHRcdFx0d2lubmluZ0l0ZW1JbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGl0ZW1zMltgJHt3aW5uaW5nSXRlbS5pZH1gXS5uYW1lKTtcclxuXHRcdFx0XHR3aW5uaW5nSXRlbU5hbWUudGV4dENvbnRlbnQgPSBpdGVtczJbYCR7d2lubmluZ0l0ZW0uaWR9YF0ubmFtZTtcclxuXHRcdFx0XHR3aW5uaW5nSXRlbVByaWNlLnRleHRDb250ZW50ID0gaXRlbXMyW2Ake3dpbm5pbmdJdGVtLmlkfWBdLnByaWNlO1xyXG5cdFx0XHRcdGhpZGVXaW5Qb3B1cCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCA1MDAwKTsgLy8gVXJ1Y2hvbSBwbyB6YWtvxYRjemVuaXUgYW5pbWFjamlcclxuXHR9IGVsc2UgaWYgKHNwaW5CdG4udGV4dENvbnRlbnQgIT09IFwic3BpbmluZ1wiKSB7XHJcblx0XHR3aW5kb3cub3BlbihcIi4uL2RpZmYvZGVwb3NpdC5odG1sXCIsIFwiX3NlbGZcIik7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgaGlkZVdpblBvcHVwID0gKCkgPT4ge1xyXG5cdHdpblB1cHVwLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XHJcblx0c2V0QnRuVGV4dCgpO1xyXG5cdHJlc2V0Qm94QW5pbWF0aW9uKCk7XHJcbn07XHJcblxyXG5jb25zdCBzZWxsV2lubmluZ0l0ZW0gPSAoKSA9PiB7XHJcblx0Y29uc3QgY3VycmVudEJhbGFuY2UgPSBwYXJzZUZsb2F0KFxyXG5cdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpLnNsaWNlKDAsIC0xKVxyXG5cdCk7XHJcblx0Y29uc3QgaXRlbVByaWNlID0gcGFyc2VGbG9hdCh3aW5uaW5nSXRlbVByaWNlLnRleHRDb250ZW50KTtcclxuXHRjb25zdCBob3dNdWNoVG9BZGRUb0JhbGFuY2UgPSAoY3VycmVudEJhbGFuY2UgKyBpdGVtUHJpY2UpLnRvRml4ZWQoMik7XHJcblx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJCYWxhbmNlXCIsIGhvd011Y2hUb0FkZFRvQmFsYW5jZSArIFwiJFwiKTtcclxuXHRoaWRlV2luUG9wdXAoKTtcclxuXHRyZWZyZXNoQmFsYW5jZSgpO1xyXG59O1xyXG5cclxuY29uc3QgdGFrZVdpbm5pbmdJdGVtID0gKCkgPT4ge1xyXG5cdGNvbnN0IGlkTnVtYmVyID0gXCJpZFwiICsgaXRlbXMyW2Ake2N1cnJlbnRXaW5uaW5nSXRlbS5pZH1gXS5pZDtcclxuXHRpZiAoXHJcblx0XHRsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpZE51bWJlcikgPT09IG51bGwgfHxcclxuXHRcdGxvY2FsU3RvcmFnZS5nZXRJdGVtKGlkTnVtYmVyKSA9PT0gTmFOXHJcblx0KSB7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShpZE51bWJlciwgMSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG5cdFx0XHRpZE51bWJlcixcclxuXHRcdFx0cGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oaWROdW1iZXIpKSArIDFcclxuXHRcdCk7XHJcblx0fVxyXG5cdGhpZGVXaW5Qb3B1cCgpO1xyXG59O1xyXG5cclxuY29uc3QgcmVmcmVzaEJhbGFuY2UgPSAoKSA9PiB7XHJcblx0YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKTtcclxuXHRiYWxhbmNlQW1vdW50TW9iaWxlLnRleHRDb250ZW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpO1xyXG59O1xyXG5cclxuY29uc3QgcmVzZXRCb3hBbmltYXRpb24gPSAoKSA9PiB7XHJcblx0Y2FzZUl0ZW1zQm94LmlubmVySFRNTCA9IFwiXCI7XHJcblx0Y2FzZUl0ZW1zQm94LnN0eWxlLnRyYW5zaXRpb24gPSBcIjAuMDFzXCI7XHJcblx0Y2FzZUl0ZW1zQm94LnN0eWxlLmxlZnQgPSBcIi0zOTUwcHhcIjtcclxuXHRjcmVhdGVJdGVtc0luQ2hlc3QoKTtcclxufTtcclxuXHJcbnNwaW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNwaW5DYXNlKTtcclxudGFrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGFrZVdpbm5pbmdJdGVtKTtcclxuc2VsbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsbFdpbm5pbmdJdGVtKTtcclxuXHJcbmNyZWF0ZUl0ZW1zSW5DaGVzdCgpO1xyXG5zZXRCdG5UZXh0KCk7Il19
