var startingPrice,currentItem,nextItem,crashBox=document.querySelector(".crash__box"),crashTop=document.querySelector(".crash__top"),crashBottom=document.querySelector(".crash__bottom"),crashBg=document.querySelector(".crash__bg"),multiplier=document.querySelector("#multi"),startBtn=document.querySelector("#start"),withdrawBtn=document.querySelector("#withdraw"),amountOfWin=document.querySelector("#amount"),nameOfItem=document.querySelector(".crash__item-name"),colorOfItem=document.querySelector(".crash__item-color"),itemsBox=document.querySelector(".profile__items-box"),userItemsPagePrevious=document.querySelector(".upgrader__list-btn--left"),userItemsPageNext=document.querySelector(".upgrader__list-btn--right"),currentPageText=document.querySelector("#page-current"),totalPageText=document.querySelector("#page-total"),noItemsText=document.querySelector(".noitems-text"),currentPage=1,itemsPerPage=14,multiplierAmount=1,isItemChanging=!1,crashGoing=!1,choosedItem=!1,didWithdraw=!1,pickedItemId="",addCreateBet=function(){crashTop.innerHTML="",crashBottom.innerHTML="",crashBox.classList.value="",crashBox.classList.add("crash__box");var e=document.createElement("img"),t=document.createElement("img"),r=(e.classList.add("crash__img","crash__img--main"),t.classList.add("crash__img","crash__img--next","add-next-item"),crashBox.classList.add(items["id".concat(currentItem)].color+"-crash-box"),colorOfItem.classList.value="",nameOfItem.textContent=items["id".concat(currentItem)].name,colorOfItem.classList.add(items["id".concat(currentItem)].color+"-crash","crash__item-color"),items["id".concat(currentItem)].price);for(i=0;i<countItemsAmount1;i++)if(sortedItems["id".concat(i)].price>r){nextItem=sortedItems["id".concat(i)].id;break}e.setAttribute("src","."+items["id".concat(currentItem)].imgDist),e.setAttribute("alt",items["id".concat(currentItem)].name),crashTop.append(e),void 0!==nextItem&&sortedItems["id".concat(currentItem)].id!==sortedItems["id".concat(nextItem)].id?(t.setAttribute("src","."+items["id".concat(nextItem)].imgDist),t.setAttribute("alt",items["id".concat(nextItem)].name),crashBottom.append(t)):crashBottom.innerHTML=""},setMultiplier=function(){multiplier.textContent=parseFloat(multiplierAmount).toFixed(2);var e,t=parseFloat((startingPrice*multiplierAmount).toFixed(2));!1===didWithdraw&&t>items["id".concat(nextItem)].price&&!isItemChanging&&(isItemChanging=!0,currentItem=nextItem,currentPrice=items["id".concat(currentItem)].price,t=document.querySelector(".crash__img--main"),(e=document.querySelector(".crash__img--next")).classList.remove("add-next-item"),t.classList.add("hide-main-item"),e.classList.add("show-next-item"),setTimeout(function(){addCreateBet(),isItemChanging=!1},250))},startCrash=function(){amountOfWin.textContent=(startingPrice*multiplierAmount).toFixed(2),crashGoing=!0,multiplierAmount=1,addCreateBet();function e(){multiplierAmount+=.01,amountOfWin.textContent=(startingPrice*multiplierAmount).toFixed(2),setMultiplier(),i<=multiplierAmount?(clearInterval(a),endGame()):(clearInterval(a),r=Math.max(50,200/Math.sqrt(multiplierAmount)),a=setInterval(e,r))}var t,r=200,i=(t=Math.pow(Math.random(),-1.25),Math.max(1.01,t)),a=setInterval(e,r)},endGame=function(){crashBg.classList.remove("hidden"),withdrawBtn.classList.add("hidden"),startBtn.classList.remove("hidden"),colorOfItem.classList.value="",nameOfItem.textContent="",crashBg.textContent="Crashed at: "+parseFloat(multiplierAmount).toFixed(2)+"x",choosedItem=crashGoing=!1},resetCrash=function(){crashBg.classList.add("hidden"),withdrawBtn.classList.add("hidden"),startBtn.classList.remove("hidden"),didWithdraw=!1};function addPlayerBet(){withdrawBtn.classList.remove("hidden"),startBtn.classList.add("hidden"),currentItem=items["id".concat(pickedItemId)].id,startingPrice=items["id".concat(currentItem)].price;var e=localStorage.getItem("id".concat(pickedItemId))-1;localStorage.setItem("id".concat(pickedItemId),parseInt(e)),pickedItemId="",itemsBox.innerHTML="",addAllUserItems(),setItemsOrder(),renderItems()}var withdrawFromCrash=function(){didWithdraw=!0,withdrawBtn.classList.add("hidden"),crashBottom.firstElementChild.remove(),null===localStorage.getItem("id".concat(currentItem))||NaN===localStorage.getItem("id".concat(currentItem))?localStorage.setItem("id".concat(currentItem),1):(e=parseInt(localStorage.getItem("id".concat(currentItem)))+1,localStorage.setItem("id".concat(currentItem),e));var e=startingPrice*multiplierAmount-items["id".concat(currentItem)].price+parseFloat(localStorage.getItem("Balance")),e=(localStorage.setItem("Balance",parseFloat(e).toFixed(2)+"$"),parseInt(localStorage.getItem("crashWon"))+1);localStorage.setItem("crashWon",e),itemsBox.innerHTML="",addAllUserItems(),setItemsOrder(),renderItems(),setBalance()},addAllUserItems=function(){for(i=0;i<countItemsAmount1;i++){var e=parseInt(localStorage.getItem("id".concat(i)))||0;for(j=0;j<e;j++){var t=document.createElement("div"),r=document.createElement("img"),a=document.createElement("p"),c=document.createElement("p"),n=document.createElement("p");t.classList.add("profile__item","can-hover"),t.classList.add(items["id".concat(i)].color+"-drop2"),r.classList.add("profile__item-img"),a.classList.add("profile__item-name"),c.classList.add("profile__item-skin"),c.classList.add(items["id".concat(i)].color+"-text"),n.classList.add("profile__item-price"),t.id=items["id".concat(i)].id,r.setAttribute("src","."+items["id".concat(i)].imgDist),r.setAttribute("alt",items["id".concat(i)].name),a.textContent=items["id".concat(i)].weapon,c.textContent=items["id".concat(i)].skin,n.textContent=items["id".concat(i)].price+"$",t.append(r,a,c,n),itemsBox.append(t)}}document.querySelectorAll(".profile__item").forEach(function(e){e.addEventListener("click",chooseItem)})};function chooseItem(){!1===choosedItem?(this.classList.toggle("active-item-jackpot"),choosedItem=!0,pickedItemId=this.id):!0===choosedItem&&this.classList.contains("active-item-jackpot")&&(this.classList.toggle("active-item-jackpot"),choosedItem=!1,pickedItemId="")}var renderItems=function(){var e=document.querySelectorAll(".profile__item"),e=Array.from(e),t=(currentPage-1)*itemsPerPage,r=t+itemsPerPage,t=(e.forEach(function(e){return e.style.display="none"}),e.slice(t,r).forEach(function(e){e.style.display="flex"}),Math.ceil(e.length/itemsPerPage));currentPageText.textContent=currentPage,(totalPageText.textContent=t)<1?(currentPageText.textContent=0,currentPageText.parentElement.classList.add("hidden"),noItemsText.classList.remove("hidden")):(currentPageText.parentElement.classList.remove("hidden"),noItemsText.classList.add("hidden")),userItemsPagePrevious.style.display=1===currentPage?"none":"block",currentPage===t?userItemsPageNext.style.display="none":0<e.length&&(userItemsPageNext.style.display="block")},changePage=function(e){var t=document.querySelectorAll(".profile__item").length,t=Math.ceil(t/itemsPerPage);-1===e&&1<currentPage?currentPage--:1===e&&currentPage<t&&currentPage++,renderItems()},setItemsOrder=function(){var e=document.querySelectorAll(".profile__item"),e=Array.from(e);e.sort(function(e,t){return parseFloat(e.children[3].textContent)-parseFloat(t.children[3].textContent)}),e.forEach(function(e){itemsBox.appendChild(e)})},addListeners=function(){startBtn.addEventListener("click",function(){!1===crashGoing&&""!==pickedItemId&&(resetCrash(),addPlayerBet(),startCrash())}),document.querySelectorAll(".profile__item").forEach(function(e){e.addEventListener("click",chooseItem)}),withdrawBtn.addEventListener("click",withdrawFromCrash)};addAllUserItems(),setItemsOrder(),renderItems(),addListeners();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVzL2NyYXNoLmpzIl0sIm5hbWVzIjpbInN0YXJ0aW5nUHJpY2UiLCJjdXJyZW50SXRlbSIsIm5leHRJdGVtIiwiY3Jhc2hCb3giLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmFzaFRvcCIsImNyYXNoQm90dG9tIiwiY3Jhc2hCZyIsIm11bHRpcGxpZXIiLCJzdGFydEJ0biIsIndpdGhkcmF3QnRuIiwiYW1vdW50T2ZXaW4iLCJuYW1lT2ZJdGVtIiwiY29sb3JPZkl0ZW0iLCJ1c2VySXRlbXNQYWdlTmV4dCIsImN1cnJlbnRQYWdlVGV4dCIsInRvdGFsUGFnZVRleHQiLCJub0l0ZW1zVGV4dCIsImN1cnJlbnRQYWdlIiwiaXRlbXNQZXJQYWdlIiwibXVsdGlwbGllckFtb3VudCIsImlzSXRlbUNoYW5naW5nIiwiY3Jhc2hHb2luZyIsImNob29zZWRJdGVtIiwiZGlkV2l0aGRyYXciLCJwaWNrZWRJdGVtSWQiLCJhZGRDcmVhdGVCZXQiLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJ2YWx1ZSIsImFkZCIsImltZ0JvdHRvbSIsImNyZWF0ZUVsZW1lbnQiLCJpbWdUb3AiLCJjdXJyZW50SXRlbVByaWNlIiwiaXRlbXMiLCJjb25jYXQiLCJjb2xvciIsInRleHRDb250ZW50IiwibmFtZSIsImkiLCJjb3VudEl0ZW1zQW1vdW50MSIsInByaWNlIiwic2V0QXR0cmlidXRlIiwiaWQiLCJpbWdEaXN0IiwiYXBwZW5kIiwidW5kZWZpbmVkIiwic29ydGVkSXRlbXMiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImN1cnJlbnRQcmljZSIsImltZ05leHQiLCJyZW1vdmUiLCJtdWx0aXBsaWVkUHJpY2UiLCJpbnRlcnZhbFRpbWUiLCJtYXhTcGVlZCIsInNldFRpbWVvdXQiLCJnZW5lcmF0ZVJhbmRvbUNyYXNoTXVsdGlwbGllciIsInJhbmRvbU11bHRpcGxpZXIiLCJjcmFzaEF0TXVsdGlwbGllciIsImluY3JlYXNlTXVsdGlwbGllciIsInNldE11bHRpcGxpZXIiLCJzZXRJbnRlcnZhbCIsImNyYXNoSW50ZXJ2YWwiLCJtYXgiLCJjbGVhckludGVydmFsIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJyYW5kb20iLCJuZXdJdGVtQW1vdW50IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImFkZEFsbFVzZXJJdGVtcyIsInNldEl0ZW1zT3JkZXIiLCJyZW5kZXJJdGVtcyIsIndpdGhkcmF3RnJvbUNyYXNoIiwiZ2V0SXRlbSIsIml0ZW1Ub0FkZCIsInBhcnNlSW50IiwiY3Jhc2hUb0FkZCIsIml0ZW1zQm94IiwiaXRlbUNvdW50IiwiaXRlbUltZyIsIml0ZW1OYW1lIiwiaXRlbVNraW4iLCJOYU4iLCJpdGVtUHJpY2UiLCJpdGVtQm94IiwibW9uZXlUb0FkZCIsImFsbEl0ZW1zT2ZQbGF5ZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNob29zZUl0ZW0iLCJzZXRCYWxhbmNlIiwiaiIsImFsbEl0ZW1zT2ZVc2VyIiwiYWxsSXRlbXNPZlVzZXJBcnJheSIsIkFycmF5IiwidXNlckVuZEluZGV4IiwidXNlclN0YXJ0SW5kZXgiLCJmb3JFYWNoIiwiaXRlbSIsImRpc3BsYXkiLCJzbGljZSIsInN0eWxlIiwiYWxsVXNlckl0ZW1zUGFnZXMiLCJjZWlsIiwid2VhcG9uIiwicGFyZW50RWxlbWVudCIsInRoaXMiLCJjaGFuZ2VQYWdlIiwiY29udGFpbnMiLCJhbGxJdGVtc09mVXNlckNvdW50IiwidG90YWxVc2VyUGFnZXMiLCJkaXJlY3Rpb24iLCJmcm9tIiwidXNlckl0ZW1zIiwiYXBwZW5kQ2hpbGQiLCJhZGRQbGF5ZXJCZXQiLCJ1c2VySXRlbXNQYWdlUHJldmlvdXMiLCJhZGRMaXN0ZW5lcnMiLCJsZW5ndGgiLCJ1c2VySXRlbXNBcnJheSIsInNvcnQiLCJhIiwiYiIsImNoaWxkcmVuIiwicmVzZXRDcmFzaCIsInN0YXJ0Q3Jhc2giXSwibWFwcGluZ3MiOiJBQUFBLElBcUJJQSxjQUNBQyxZQUNBQyxTQXZCRUMsU0FBVUMsU0FB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TixFQUFvQnlCLFNBQzlCN0csa0JBQWtCNEYsTUFBTUYsUUFBVSxRQUVwQyxFQUVNUSxXQUFhLFNBQUNJLEdBRW5CLElBQU1GLEVBQ0wvRyxTQUFTeUYsaUJBQWlCLGdCQUFnQixFQUFFK0IsT0FDdkNSLEVBQWlCaEQsS0FBS3lDLEtBQUtNLEVBQXNCL0YsWUFBWSxFQUVqRCxDQUFDLElBQWZpRyxHQUFrQyxFQUFkbEcsWUFFdkJBLFdBQVcsR0FDYSxJQUFka0csR0FBbUJsRyxZQUFjaUcsR0FDM0NqRyxXQUFXLEdBR1owRCxZQUFZLENBQ2IsRUFFTUQsY0FBZ0IsV0FFckIsSUFBTTJDLEVBQVluSCxTQUFTeUYsaUJBQWlCLGdCQUFnQixFQUN0RGdDLEVBQWlCekIsTUFBTWtCLEtBQUtDLENBQVMsRUFFM0NNLEVBQWVDLEtBQUssU0FBQ0MsRUFBR0MsR0FFdkIsT0FDQzlFLFdBQVc2RSxFQUFFRSxTQUFTLEdBQUcxRixXQUFXLEVBQ3BDVyxXQUFXOEUsRUFBRUMsU0FBUyxHQUFHMUYsV0FBVyxDQUV0QyxDQUFDLEVBRURzRixFQUFldEIsUUFBUSxTQUFDQyxHQUV2QnJCLFNBQVNxQyxZQUFZaEIsQ0FBSSxDQUMxQixDQUFDLENBQ0YsRUFHTW1CLGFBQWUsV0FDcEJqSCxTQUFTb0YsaUJBQWlCLFFBQVMsV0FDZixDQUFBLElBQWZ2RSxZQUF5QyxLQUFqQkcsZUFDM0J3RyxXQUFXLEVBQ1hULGFBQWEsRUFDYlUsV0FBVyxFQUViLENBQUMsRUFFd0IvSCxTQUFTeUYsaUJBQWlCLGdCQUFnQixFQUVsRFUsUUFBUSxTQUFDQyxHQUN6QkEsRUFBS1YsaUJBQWlCLFFBQVNDLFVBQVUsQ0FDMUMsQ0FBQyxFQUVEcEYsWUFBWW1GLGlCQUFpQixRQUFTaEIsaUJBQWlCLENBQ3hELEVBRUFILGdCQUFnQixFQUNoQkMsY0FBYyxFQUNkQyxZQUFZLEVBQ1o4QyxhQUFhIiwiZmlsZSI6Im1vZGVzL2NyYXNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNyYXNoQm94PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyYXNoX19ib3hcIik7XHJcbmNvbnN0IGNyYXNoVG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmFzaF9fdG9wXCIpO1xyXG5jb25zdCBjcmFzaEJvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3Jhc2hfX2JvdHRvbVwiKTtcclxuY29uc3QgY3Jhc2hCZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3Jhc2hfX2JnXCIpO1xyXG5jb25zdCBtdWx0aXBsaWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtdWx0aVwiKTtcclxuY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXJ0XCIpO1xyXG5jb25zdCB3aXRoZHJhd0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd2l0aGRyYXdcIik7XHJcbmNvbnN0IGFtb3VudE9mV2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbW91bnRcIik7XHJcbmNvbnN0IG5hbWVPZkl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyYXNoX19pdGVtLW5hbWVcIik7XHJcbmNvbnN0IGNvbG9yT2ZJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmFzaF9faXRlbS1jb2xvclwiKTtcclxuY29uc3QgaXRlbXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2l0ZW1zLWJveFwiKTtcclxuY29uc3QgdXNlckl0ZW1zUGFnZVByZXZpb3VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi51cGdyYWRlcl9fbGlzdC1idG4tLWxlZnRcIlxyXG4pO1xyXG5jb25zdCB1c2VySXRlbXNQYWdlTmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXBncmFkZXJfX2xpc3QtYnRuLS1yaWdodFwiKTtcclxuY29uc3QgY3VycmVudFBhZ2VUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwYWdlLWN1cnJlbnRcIik7XHJcbmNvbnN0IHRvdGFsUGFnZVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BhZ2UtdG90YWxcIik7XHJcbmNvbnN0IG5vSXRlbXNUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ub2l0ZW1zLXRleHRcIik7XHJcbmxldCBjdXJyZW50UGFnZSA9IDE7IC8vIGN1cnJlbnQgcGFnZSBvZiB1c2VyIGl0ZW1zXHJcbmNvbnN0IGl0ZW1zUGVyUGFnZSA9IDE0OyAvLyBtYXggaXRlbXMgcGVyIHBhZ2VcclxuXHJcbmxldCBzdGFydGluZ1ByaWNlO1xyXG5sZXQgY3VycmVudEl0ZW07XHJcbmxldCBuZXh0SXRlbTtcclxubGV0IG11bHRpcGxpZXJBbW91bnQgPSAxLjA7IC8vIFBvY3rEhXRrb3d5IG1ub8W8bmlrXHJcbmxldCBpc0l0ZW1DaGFuZ2luZyA9IGZhbHNlOyAvLyBHdWFyZCBmbGFnIHRvIHByZXZlbnQgbXVsdGlwbGUgdHJpZ2dlcnNcclxubGV0IGNyYXNoR29pbmcgPSBmYWxzZTtcclxubGV0IGNob29zZWRJdGVtID0gZmFsc2U7XHJcbmxldCBkaWRXaXRoZHJhdyA9IGZhbHNlO1xyXG5sZXQgcGlja2VkSXRlbUlkID0gXCJcIjtcclxuXHJcbi8vIEZ1bmtjamEgZG9kYWrEhWNhIG9icmF6eSBwcnplZG1pb3TDs3cgZG8gVUlcclxuY29uc3QgYWRkQ3JlYXRlQmV0ID0gKCkgPT4ge1xyXG5cdGNyYXNoVG9wLmlubmVySFRNTCA9IFwiXCI7XHJcblx0Y3Jhc2hCb3R0b20uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGNyYXNoQm94LmNsYXNzTGlzdC52YWx1ZSA9IFwiXCJcclxuICAgIGNyYXNoQm94LmNsYXNzTGlzdC5hZGQoXCJjcmFzaF9fYm94XCIpXHJcblxyXG5cdGNvbnN0IGltZ1RvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcblx0Y29uc3QgaW1nQm90dG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuXHRpbWdUb3AuY2xhc3NMaXN0LmFkZChcImNyYXNoX19pbWdcIiwgXCJjcmFzaF9faW1nLS1tYWluXCIpO1xyXG5cdGltZ0JvdHRvbS5jbGFzc0xpc3QuYWRkKFwiY3Jhc2hfX2ltZ1wiLCBcImNyYXNoX19pbWctLW5leHRcIiwgXCJhZGQtbmV4dC1pdGVtXCIpO1xyXG5cclxuY3Jhc2hCb3guY2xhc3NMaXN0LmFkZChpdGVtc1tgaWQke2N1cnJlbnRJdGVtfWBdLmNvbG9yICsgXCItY3Jhc2gtYm94XCIpXHJcblxyXG5cdGNvbG9yT2ZJdGVtLmNsYXNzTGlzdC52YWx1ZSA9IFwiXCI7XHJcblx0bmFtZU9mSXRlbS50ZXh0Q29udGVudCA9IGl0ZW1zW2BpZCR7Y3VycmVudEl0ZW19YF0ubmFtZTtcclxuXHRjb2xvck9mSXRlbS5jbGFzc0xpc3QuYWRkKFxyXG5cdFx0aXRlbXNbYGlkJHtjdXJyZW50SXRlbX1gXS5jb2xvciArIFwiLWNyYXNoXCIsXHJcblx0XHRcImNyYXNoX19pdGVtLWNvbG9yXCJcclxuXHQpO1xyXG5cclxuXHRjb25zdCBjdXJyZW50SXRlbVByaWNlID0gaXRlbXNbYGlkJHtjdXJyZW50SXRlbX1gXS5wcmljZTtcclxuXHJcblx0Ly8gWm5hamTFuiBuYXN0xJlwbnkgcHJ6ZWRtaW90LCBrdMOzcnkgamVzdCBkcm/FvHN6eSBvZCBiaWXFvMSFY2Vnb1xyXG5cdGZvciAoaSA9IDA7IGkgPCBjb3VudEl0ZW1zQW1vdW50MTsgaSsrKSB7XHJcblx0XHRpZiAoc29ydGVkSXRlbXNbYGlkJHtpfWBdLnByaWNlID4gY3VycmVudEl0ZW1QcmljZSkge1xyXG5cdFx0XHRuZXh0SXRlbSA9IHNvcnRlZEl0ZW1zW2BpZCR7aX1gXS5pZDtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBVc3RhdyBvYnJheiBiaWXFvMSFY2VnbyBwcnplZG1pb3R1XHJcblx0aW1nVG9wLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi5cIiArIGl0ZW1zW2BpZCR7Y3VycmVudEl0ZW19YF0uaW1nRGlzdCk7XHJcblx0aW1nVG9wLnNldEF0dHJpYnV0ZShcImFsdFwiLCBpdGVtc1tgaWQke2N1cnJlbnRJdGVtfWBdLm5hbWUpO1xyXG5cdGNyYXNoVG9wLmFwcGVuZChpbWdUb3ApO1xyXG5cclxuXHQvLyBVc3RhdyBvYnJheiBuYXN0xJlwbmVnbyBwcnplZG1pb3R1XHJcblx0aWYgKFxyXG5cdFx0bmV4dEl0ZW0gIT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0IShzb3J0ZWRJdGVtc1tgaWQke2N1cnJlbnRJdGVtfWBdLmlkID09PSBzb3J0ZWRJdGVtc1tgaWQke25leHRJdGVtfWBdLmlkKVxyXG5cdCkge1xyXG5cdFx0aW1nQm90dG9tLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi5cIiArIGl0ZW1zW2BpZCR7bmV4dEl0ZW19YF0uaW1nRGlzdCk7XHJcblx0XHRpbWdCb3R0b20uc2V0QXR0cmlidXRlKFwiYWx0XCIsIGl0ZW1zW2BpZCR7bmV4dEl0ZW19YF0ubmFtZSk7XHJcblx0XHRjcmFzaEJvdHRvbS5hcHBlbmQoaW1nQm90dG9tKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y3Jhc2hCb3R0b20uaW5uZXJIVE1MID0gXCJcIjtcclxuXHR9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIHVzdGF3aWFqxIVjYSBtbm/FvG5payBpIHNwcmF3ZHphasSFY2Egd2FydW5raVxyXG5jb25zdCBzZXRNdWx0aXBsaWVyID0gKCkgPT4ge1xyXG5cdG11bHRpcGxpZXIudGV4dENvbnRlbnQgPSBwYXJzZUZsb2F0KG11bHRpcGxpZXJBbW91bnQpLnRvRml4ZWQoMik7XHJcblxyXG5cdC8vIFBvcHJhd2lvbmUgcG9yw7N3bmFuaWU6IHXFvHl3YW15IGNlbnkgc3RhcnRvd2VqIHBvbW5vxbxvbmVqIHByemV6IG1ub8W8bmlrXHJcblx0Y29uc3QgbXVsdGlwbGllZFByaWNlID0gcGFyc2VGbG9hdChcclxuXHRcdChzdGFydGluZ1ByaWNlICogbXVsdGlwbGllckFtb3VudCkudG9GaXhlZCgyKVxyXG5cdCk7XHJcblxyXG5cdGlmIChkaWRXaXRoZHJhdyA9PT0gZmFsc2UpIHtcclxuXHRcdC8vIEplxZtsaSBjZW5hIHBvIG1ub8W8bmlrdSBwcnpla3JhY3phIGNlbsSZIG5hc3TEmXBuZWdvIHByemVkbWlvdHUsIHptaWXFhCBwcnplZG1pb3RcclxuXHRcdGlmIChtdWx0aXBsaWVkUHJpY2UgPiBpdGVtc1tgaWQke25leHRJdGVtfWBdLnByaWNlICYmICFpc0l0ZW1DaGFuZ2luZykge1xyXG5cdFx0XHRpc0l0ZW1DaGFuZ2luZyA9IHRydWU7IC8vIFNldCBmbGFnIHRvIHByZXZlbnQgbXVsdGlwbGUgdHJpZ2dlcnNcclxuXHRcdFx0Y3VycmVudEl0ZW0gPSBuZXh0SXRlbTsgLy8gWmFrdHVhbGl6dWogcHJ6ZWRtaW90IG5hIG5vd3lcclxuXHRcdFx0Y3VycmVudFByaWNlID0gaXRlbXNbYGlkJHtjdXJyZW50SXRlbX1gXS5wcmljZTsgLy8gWmFrdHVhbGl6dWogY2VuxJkgbmEgbm93xIVcclxuXHJcblx0XHRcdGNvbnN0IGltZ1RvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3Jhc2hfX2ltZy0tbWFpblwiKTtcclxuXHRcdFx0Y29uc3QgaW1nTmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3Jhc2hfX2ltZy0tbmV4dFwiKTtcclxuXHJcblx0XHRcdGltZ05leHQuY2xhc3NMaXN0LnJlbW92ZShcImFkZC1uZXh0LWl0ZW1cIik7XHJcblx0XHRcdGltZ1RvcC5jbGFzc0xpc3QuYWRkKFwiaGlkZS1tYWluLWl0ZW1cIik7XHJcblx0XHRcdGltZ05leHQuY2xhc3NMaXN0LmFkZChcInNob3ctbmV4dC1pdGVtXCIpO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0YWRkQ3JlYXRlQmV0KCk7XHJcblx0XHRcdFx0aXNJdGVtQ2hhbmdpbmcgPSBmYWxzZTsgLy8gUmVzZXQgZmxhZyBhZnRlciBVSSB1cGRhdGVcclxuXHRcdFx0fSwgMjUwKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBzdGFydENyYXNoID0gKCkgPT4ge1xyXG5cdGFtb3VudE9mV2luLnRleHRDb250ZW50ID0gKHN0YXJ0aW5nUHJpY2UgKiBtdWx0aXBsaWVyQW1vdW50KS50b0ZpeGVkKDIpO1xyXG5cdGNyYXNoR29pbmcgPSB0cnVlO1xyXG5cdG11bHRpcGxpZXJBbW91bnQgPSAxLjA7IC8vIFJlc2V0IG11bHRpcGxpZXIgdG8gaW5pdGlhbCB2YWx1ZVxyXG5cdGFkZENyZWF0ZUJldCgpO1xyXG5cclxuXHRsZXQgaW50ZXJ2YWxUaW1lID0gMjAwOyAvLyBTdGFydCBpbnRlcnZhbCB0aW1lICgyMDBtcyBmb3Igc2xvd2VyIHN0YXJ0KVxyXG5cdGNvbnN0IG1heFNwZWVkID0gNTA7IC8vIE1pbmltdW0gaW50ZXJ2YWwgKG1heGltdW0gc3BlZWQpXHJcblxyXG5cdC8vIEZ1bmtjamEgZ2VuZXJ1asSFY2EgbG9zb3d5IG1ub8W8bmlrIGNyYXNoYVxyXG5cdGNvbnN0IGdlbmVyYXRlUmFuZG9tQ3Jhc2hNdWx0aXBsaWVyID0gKCkgPT4ge1xyXG5cdFx0Y29uc3QgbGFtYmRhID0gMC44OyAvLyBabWllbmlvbnkgcGFyYW1ldHIsIG5pxbxzemUgd2FydG/Fm2NpIGRsYSByemFkc3p5Y2ggd3nFvHN6eWNoIHd5bmlrw7N3XHJcblx0XHRsZXQgcmFuZG9tTXVsdGlwbGllciA9IE1hdGgucG93KE1hdGgucmFuZG9tKCksIC0xIC8gbGFtYmRhKTtcclxuXHRcdHJldHVybiBNYXRoLm1heCgxLjAxLCByYW5kb21NdWx0aXBsaWVyKTtcclxuXHR9O1xyXG5cclxuXHQvLyBHZW5lcnVqZW15IGxvc293eSBtbm/FvG5payBjcmFzaGEgcHJ6eSByb3pwb2N6xJljaXVcclxuXHRjb25zdCBjcmFzaEF0TXVsdGlwbGllciA9IGdlbmVyYXRlUmFuZG9tQ3Jhc2hNdWx0aXBsaWVyKCk7XHJcblxyXG5cdGNvbnN0IGluY3JlYXNlTXVsdGlwbGllciA9ICgpID0+IHtcclxuXHRcdG11bHRpcGxpZXJBbW91bnQgKz0gMC4wMTsgLy8gSW5jcmVhc2UgbXVsdGlwbGllclxyXG5cdFx0YW1vdW50T2ZXaW4udGV4dENvbnRlbnQgPSAoc3RhcnRpbmdQcmljZSAqIG11bHRpcGxpZXJBbW91bnQpLnRvRml4ZWQoMik7XHJcblx0XHRzZXRNdWx0aXBsaWVyKCk7XHJcblxyXG5cdFx0aWYgKG11bHRpcGxpZXJBbW91bnQgPj0gY3Jhc2hBdE11bHRpcGxpZXIpIHtcclxuXHRcdFx0Ly8gQ3Jhc2ggbmFzdMSZcHVqZSwgZ2R5IG9zacSFZ25pZW15IGxvc293eSBtbm/FvG5pa1xyXG5cdFx0XHRjbGVhckludGVydmFsKGNyYXNoSW50ZXJ2YWwpO1xyXG5cdFx0XHRlbmRHYW1lKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBDbGVhciB0aGUgb2xkIGludGVydmFsIGFuZCBzdGFydCBhIG5ldywgc2xpZ2h0bHkgZmFzdGVyIG9uZVxyXG5cdFx0XHRjbGVhckludGVydmFsKGNyYXNoSW50ZXJ2YWwpO1xyXG5cclxuXHRcdFx0Ly8gUmVkdWNlIGludGVydmFsIG1vcmUgZ2VudGx5IGFuZCBub3QgdG9vIHF1aWNrbHksIGVuc3VyaW5nIHNtb290aCBhY2NlbGVyYXRpb25cclxuXHRcdFx0aW50ZXJ2YWxUaW1lID0gTWF0aC5tYXgobWF4U3BlZWQsIDIwMCAvIE1hdGguc3FydChtdWx0aXBsaWVyQW1vdW50KSk7XHJcblxyXG5cdFx0XHRjcmFzaEludGVydmFsID0gc2V0SW50ZXJ2YWwoaW5jcmVhc2VNdWx0aXBsaWVyLCBpbnRlcnZhbFRpbWUpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIFN0YXJ0IHRoZSBmaXJzdCBpbnRlcnZhbFxyXG5cdGxldCBjcmFzaEludGVydmFsID0gc2V0SW50ZXJ2YWwoaW5jcmVhc2VNdWx0aXBsaWVyLCBpbnRlcnZhbFRpbWUpO1xyXG59O1xyXG5cclxuY29uc3QgZW5kR2FtZSA9ICgpID0+IHtcclxuXHRjcmFzaEJnLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcblx0d2l0aGRyYXdCdG4uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHRzdGFydEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cdGNvbG9yT2ZJdGVtLmNsYXNzTGlzdC52YWx1ZSA9IFwiXCI7XHJcblx0bmFtZU9mSXRlbS50ZXh0Q29udGVudCA9IFwiXCI7XHJcblx0Y3Jhc2hCZy50ZXh0Q29udGVudCA9XHJcblx0XHRcIkNyYXNoZWQgYXQ6IFwiICsgcGFyc2VGbG9hdChtdWx0aXBsaWVyQW1vdW50KS50b0ZpeGVkKDIpICsgXCJ4XCI7XHJcblx0Y3Jhc2hHb2luZyA9IGZhbHNlO1xyXG5cdGNob29zZWRJdGVtID0gZmFsc2U7XHJcbn07XHJcblxyXG5jb25zdCByZXNldENyYXNoID0gKCkgPT4ge1xyXG5cdGNyYXNoQmcuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHR3aXRoZHJhd0J0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cdHN0YXJ0QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcblx0ZGlkV2l0aGRyYXcgPSBmYWxzZTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGFkZFBsYXllckJldCgpIHtcclxuXHR3aXRoZHJhd0J0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cdHN0YXJ0QnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcblx0Y3VycmVudEl0ZW0gPSBpdGVtc1tgaWQke3BpY2tlZEl0ZW1JZH1gXS5pZDtcclxuXHRzdGFydGluZ1ByaWNlID0gaXRlbXNbYGlkJHtjdXJyZW50SXRlbX1gXS5wcmljZTtcclxuXHJcblx0Y29uc3QgbmV3SXRlbUFtb3VudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBpZCR7cGlja2VkSXRlbUlkfWApIC0gMTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgaWQke3BpY2tlZEl0ZW1JZH1gLCBwYXJzZUludChuZXdJdGVtQW1vdW50KSk7XHJcblxyXG5cdHBpY2tlZEl0ZW1JZCA9IFwiXCI7XHJcblx0aXRlbXNCb3guaW5uZXJIVE1MID0gXCJcIjtcclxuXHRhZGRBbGxVc2VySXRlbXMoKTtcclxuXHRzZXRJdGVtc09yZGVyKCk7XHJcblx0cmVuZGVySXRlbXMoKTtcclxufVxyXG5cclxuY29uc3Qgd2l0aGRyYXdGcm9tQ3Jhc2ggPSAoKSA9PiB7XHJcblx0ZGlkV2l0aGRyYXcgPSB0cnVlO1xyXG5cdHdpdGhkcmF3QnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcblx0Y3Jhc2hCb3R0b20uZmlyc3RFbGVtZW50Q2hpbGQucmVtb3ZlKCk7XHJcblxyXG5cdGlmIChcclxuXHRcdGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBpZCR7Y3VycmVudEl0ZW19YCkgPT09IG51bGwgfHxcclxuXHRcdGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBpZCR7Y3VycmVudEl0ZW19YCkgPT09IE5hTlxyXG5cdCkge1xyXG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oYGlkJHtjdXJyZW50SXRlbX1gLCAxKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y29uc3QgaXRlbVRvQWRkID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oYGlkJHtjdXJyZW50SXRlbX1gKSkgKyAxO1xyXG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oYGlkJHtjdXJyZW50SXRlbX1gLCBpdGVtVG9BZGQpO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgbW9uZXlUb0FkZCA9XHJcblx0XHRzdGFydGluZ1ByaWNlICogbXVsdGlwbGllckFtb3VudCAtXHJcblx0XHRpdGVtc1tgaWQke2N1cnJlbnRJdGVtfWBdLnByaWNlICtcclxuXHRcdHBhcnNlRmxvYXQobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpKTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgcGFyc2VGbG9hdChtb25leVRvQWRkKS50b0ZpeGVkKDIpICsgXCIkXCIpO1xyXG5cclxuXHRjb25zdCBjcmFzaFRvQWRkID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjcmFzaFdvblwiKSkgKyAxO1xyXG5cdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3Jhc2hXb25cIiwgY3Jhc2hUb0FkZCk7XHJcblxyXG5cdGl0ZW1zQm94LmlubmVySFRNTCA9IFwiXCI7XHJcblx0YWRkQWxsVXNlckl0ZW1zKCk7XHJcblx0c2V0SXRlbXNPcmRlcigpO1xyXG5cdHJlbmRlckl0ZW1zKCk7XHJcblx0c2V0QmFsYW5jZSgpO1xyXG59O1xyXG5cclxuY29uc3QgYWRkQWxsVXNlckl0ZW1zID0gKCkgPT4ge1xyXG5cdC8vIGZ1bmN0aW9uIHRoYXQgYWRkcyBhbGwgcGxheWVyIGl0ZW1zXHJcblx0Zm9yIChpID0gMDsgaSA8IGNvdW50SXRlbXNBbW91bnQxOyBpKyspIHtcclxuXHRcdC8vIGxvb3BpbmcgdGhpcyBmb3IgZXZlcnkgaXRlbSBpbiBkYXRhIGJhc2VcclxuXHRcdGNvbnN0IGl0ZW1Db3VudCA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBpZCR7aX1gKSkgfHwgMDsgLy8gaWYgcGxheWVyIGhhdmUgdGhhdCBpdGVtIHNhdmUgaXRzIHZhbHVlIChhbW91bnQgb2YgaXRlbXMpXHJcblx0XHRmb3IgKGogPSAwOyBqIDwgaXRlbUNvdW50OyBqKyspIHtcclxuXHRcdFx0Ly8gY3JlYXRlIGl0ZW1zIGJhc2VkIG9uIGhvdyBtYW55IHBsYXllciBkb2VzIGhhdmVcclxuXHRcdFx0Y29uc3QgaXRlbUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7IC8vIGl0ZW0gZWxlbWVudHNcclxuXHRcdFx0Y29uc3QgaXRlbUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcblx0XHRcdGNvbnN0IGl0ZW1OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRcdGNvbnN0IGl0ZW1Ta2luID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRcdGNvbnN0IGl0ZW1QcmljZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cclxuXHRcdFx0aXRlbUJveC5jbGFzc0xpc3QuYWRkKFwicHJvZmlsZV9faXRlbVwiLCBcImNhbi1ob3ZlclwiKTsgLy8gaXRlbSBjbGFzc2VzXHJcblx0XHRcdGl0ZW1Cb3guY2xhc3NMaXN0LmFkZChpdGVtc1tgaWQke2l9YF0uY29sb3IgKyBcIi1kcm9wMlwiKTtcclxuXHRcdFx0aXRlbUltZy5jbGFzc0xpc3QuYWRkKFwicHJvZmlsZV9faXRlbS1pbWdcIik7XHJcblx0XHRcdGl0ZW1OYW1lLmNsYXNzTGlzdC5hZGQoXCJwcm9maWxlX19pdGVtLW5hbWVcIik7XHJcblx0XHRcdGl0ZW1Ta2luLmNsYXNzTGlzdC5hZGQoXCJwcm9maWxlX19pdGVtLXNraW5cIik7XHJcblx0XHRcdGl0ZW1Ta2luLmNsYXNzTGlzdC5hZGQoaXRlbXNbYGlkJHtpfWBdLmNvbG9yICsgXCItdGV4dFwiKTtcclxuXHRcdFx0aXRlbVByaWNlLmNsYXNzTGlzdC5hZGQoXCJwcm9maWxlX19pdGVtLXByaWNlXCIpO1xyXG5cclxuXHRcdFx0aXRlbUJveC5pZCA9IGl0ZW1zW2BpZCR7aX1gXS5pZDsgLy8gaXRlbSBhdHRyaWJ1dGVzLCB0ZXh0Q29udGVudHNcclxuXHRcdFx0aXRlbUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuXCIgKyBpdGVtc1tgaWQke2l9YF0uaW1nRGlzdCk7XHJcblx0XHRcdGl0ZW1JbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGl0ZW1zW2BpZCR7aX1gXS5uYW1lKTtcclxuXHRcdFx0aXRlbU5hbWUudGV4dENvbnRlbnQgPSBpdGVtc1tgaWQke2l9YF0ud2VhcG9uO1xyXG5cdFx0XHRpdGVtU2tpbi50ZXh0Q29udGVudCA9IGl0ZW1zW2BpZCR7aX1gXS5za2luO1xyXG5cdFx0XHRpdGVtUHJpY2UudGV4dENvbnRlbnQgPSBpdGVtc1tgaWQke2l9YF0ucHJpY2UgKyBcIiRcIjtcclxuXHJcblx0XHRcdGl0ZW1Cb3guYXBwZW5kKGl0ZW1JbWcsIGl0ZW1OYW1lLCBpdGVtU2tpbiwgaXRlbVByaWNlKTsgLy8gYXBwZW5kIGV2ZXJ5dGhpbmcgdG8gaXRlbVxyXG5cdFx0XHRpdGVtc0JveC5hcHBlbmQoaXRlbUJveCk7IC8vIGFwZWVuZCBpdGVtIHRvIGl0ZW1zIGNvbnRhaW5lclxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWxsSXRlbXNPZlBsYXllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZmlsZV9faXRlbVwiKTtcclxuXHRhbGxJdGVtc09mUGxheWVyLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNob29zZUl0ZW0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gY2hvb3NlSXRlbSgpIHtcclxuXHRpZiAoY2hvb3NlZEl0ZW0gPT09IGZhbHNlKSB7XHJcblx0XHR0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmUtaXRlbS1qYWNrcG90XCIpO1xyXG5cdFx0Y2hvb3NlZEl0ZW0gPSB0cnVlO1xyXG5cdFx0cGlja2VkSXRlbUlkID0gdGhpcy5pZDtcclxuXHR9IGVsc2UgaWYgKFxyXG5cdFx0Y2hvb3NlZEl0ZW0gPT09IHRydWUgJiZcclxuXHRcdHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlLWl0ZW0tamFja3BvdFwiKVxyXG5cdCkge1xyXG5cdFx0dGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlLWl0ZW0tamFja3BvdFwiKTtcclxuXHRcdGNob29zZWRJdGVtID0gZmFsc2U7XHJcblx0XHRwaWNrZWRJdGVtSWQgPSBcIlwiO1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgcmVuZGVySXRlbXMgPSAoKSA9PiB7XHJcblx0Ly8gc2V0IGl0ZW1zIG9uIHBhZ2VzXHJcblx0Y29uc3QgYWxsSXRlbXNPZlVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2ZpbGVfX2l0ZW1cIik7IC8vIGdldCBhbGwgaXRlbXMgb2YgdXNlclxyXG5cdGNvbnN0IGFsbEl0ZW1zT2ZVc2VyQXJyYXkgPSBBcnJheS5mcm9tKGFsbEl0ZW1zT2ZVc2VyKTsgLy8gbWFrZSBhcnJheSBmcm9tIGFsbCBpdGVtc1xyXG5cclxuXHRjb25zdCB1c2VyU3RhcnRJbmRleCA9IChjdXJyZW50UGFnZSAtIDEpICogaXRlbXNQZXJQYWdlOyAvLyBnZXQgaW5kZXggb2YgYXJyYXkgdG8gc3RhcnQgZnJvbSBiYXNlZCBvbiBjdXJyZW50IHBhZ2VcclxuXHRjb25zdCB1c2VyRW5kSW5kZXggPSB1c2VyU3RhcnRJbmRleCArIGl0ZW1zUGVyUGFnZTsgLy8gZ2V0IGVuZCBpbmRleCBvZiBhcnJheVxyXG5cclxuXHRhbGxJdGVtc09mVXNlckFycmF5LmZvckVhY2goKGl0ZW0pID0+IChpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIikpOyAvLyBoaWRlIGFsbCBpdGVtc1xyXG5cclxuXHRhbGxJdGVtc09mVXNlckFycmF5LnNsaWNlKHVzZXJTdGFydEluZGV4LCB1c2VyRW5kSW5kZXgpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdC8vIGZvciBpdGVtcyBmcm9tIHJhbmdlIG9mIGN1cnJlbnQgcGFnZSwgbWFrZSB0aGVtIHZpc2libGVcclxuXHRcdGl0ZW0uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cdH0pO1xyXG5cclxuXHRjb25zdCBhbGxVc2VySXRlbXNQYWdlcyA9IE1hdGguY2VpbChcclxuXHRcdGFsbEl0ZW1zT2ZVc2VyQXJyYXkubGVuZ3RoIC8gaXRlbXNQZXJQYWdlXHJcblx0KTsgLy8gZ2V0IHRvdGFsIGFtb3VudCBvZiBwYWdlc1xyXG5cclxuXHRjdXJyZW50UGFnZVRleHQudGV4dENvbnRlbnQgPSBjdXJyZW50UGFnZTtcclxuXHR0b3RhbFBhZ2VUZXh0LnRleHRDb250ZW50ID0gYWxsVXNlckl0ZW1zUGFnZXM7XHJcblxyXG5cdGlmIChhbGxVc2VySXRlbXNQYWdlcyA8IDEpIHtcclxuXHRcdGN1cnJlbnRQYWdlVGV4dC50ZXh0Q29udGVudCA9IDA7XHJcblx0XHRjdXJyZW50UGFnZVRleHQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cdFx0bm9JdGVtc1RleHQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y3VycmVudFBhZ2VUZXh0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHRcdG5vSXRlbXNUZXh0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcblx0fVxyXG5cclxuXHRpZiAoY3VycmVudFBhZ2UgPT09IDEpIHtcclxuXHRcdHVzZXJJdGVtc1BhZ2VQcmV2aW91cy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IC8vIGlmIGN1cnJlbnQgcGFnZSBpcyBwYWdlIG9uZSBoaWRlIHByZXZpb3VzIHBhZ2UgYnV0dG9uXHJcblx0fSBlbHNlIHtcclxuXHRcdHVzZXJJdGVtc1BhZ2VQcmV2aW91cy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiOyAvLyBpZiBpdHMgbm90IHBhZ2Ugb25lIHNob3cgaXRcclxuXHR9XHJcblxyXG5cdGlmIChjdXJyZW50UGFnZSA9PT0gYWxsVXNlckl0ZW1zUGFnZXMpIHtcclxuXHRcdHVzZXJJdGVtc1BhZ2VOZXh0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgLy8gaWYgY3VycmVudCBwYWdlIGlzIGxhc3QgcGFnZSBoaWRlIG5leHQgcGFnZSBidXR0b25cclxuXHR9IGVsc2UgaWYgKGFsbEl0ZW1zT2ZVc2VyQXJyYXkubGVuZ3RoID4gMCkge1xyXG5cdFx0dXNlckl0ZW1zUGFnZU5leHQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjsgLy8gaWYgd2UgaGF2ZSBhdCBsZWFzdCBvbmUgcGFnZSBzaG93IG5leHQgcGFnZSBidXR0b25cclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGFuZ2VQYWdlID0gKGRpcmVjdGlvbikgPT4ge1xyXG5cdC8vIGZ1bmN0aW9uIHRvIGNoYW5nZSBwYWdlXHJcblx0Y29uc3QgYWxsSXRlbXNPZlVzZXJDb3VudCA9XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2ZpbGVfX2l0ZW1cIikubGVuZ3RoOyAvLyBnZXQgYW1vdW50IG9mIHVzZXIgaXRlbXNcclxuXHRjb25zdCB0b3RhbFVzZXJQYWdlcyA9IE1hdGguY2VpbChhbGxJdGVtc09mVXNlckNvdW50IC8gaXRlbXNQZXJQYWdlKTsgLy8gZ2V0IHRvdGFsIHBhZ2VzXHJcblxyXG5cdGlmIChkaXJlY3Rpb24gPT09IC0xICYmIGN1cnJlbnRQYWdlID4gMSkge1xyXG5cdFx0Ly8gY2hhbmdlIHBhZ2UgYmFzZWQgb24gYnV0dG9uIGNsaWNrZWRcclxuXHRcdGN1cnJlbnRQYWdlLS07XHJcblx0fSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IDEgJiYgY3VycmVudFBhZ2UgPCB0b3RhbFVzZXJQYWdlcykge1xyXG5cdFx0Y3VycmVudFBhZ2UrKztcclxuXHR9XHJcblxyXG5cdHJlbmRlckl0ZW1zKCk7XHJcbn07XHJcblxyXG5jb25zdCBzZXRJdGVtc09yZGVyID0gKCkgPT4ge1xyXG5cdC8vIGZ1bmN0aW9uIHRvIHNldCBpdGVtcyBvcmRlclxyXG5cdGNvbnN0IHVzZXJJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZmlsZV9faXRlbVwiKTsgLy8gdGFrZSBhbGwgcGxheWVyIGl0ZW1zXHJcblx0Y29uc3QgdXNlckl0ZW1zQXJyYXkgPSBBcnJheS5mcm9tKHVzZXJJdGVtcyk7IC8vIGRvIGFycmF5IGZyb20gaXRcclxuXHJcblx0dXNlckl0ZW1zQXJyYXkuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0Ly8gc29ydCBpdGVtcyBmcm9tIGNoZWFwZXN0IHRvIG1vc3QgZXhwZW5zaXZlXHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHRwYXJzZUZsb2F0KGEuY2hpbGRyZW5bM10udGV4dENvbnRlbnQpIC1cclxuXHRcdFx0cGFyc2VGbG9hdChiLmNoaWxkcmVuWzNdLnRleHRDb250ZW50KVxyXG5cdFx0KTtcclxuXHR9KTtcclxuXHJcblx0dXNlckl0ZW1zQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0Ly8gYXBwZW5kIHNvcnRlZCBpdGVtc1xyXG5cdFx0aXRlbXNCb3guYXBwZW5kQ2hpbGQoaXRlbSk7XHJcblx0fSk7XHJcbn07XHJcblxyXG4vLyBEb2RhbmllIG5hc8WCdWNoaXdhY3p5IHpkYXJ6ZcWEXHJcbmNvbnN0IGFkZExpc3RlbmVycyA9ICgpID0+IHtcclxuXHRzdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0aWYgKGNyYXNoR29pbmcgPT09IGZhbHNlICYmIHBpY2tlZEl0ZW1JZCAhPT0gXCJcIikge1xyXG5cdFx0XHRyZXNldENyYXNoKCk7XHJcblx0XHRcdGFkZFBsYXllckJldCgpO1xyXG5cdFx0XHRzdGFydENyYXNoKCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGNvbnN0IGFsbEl0ZW1zT2ZQbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2ZpbGVfX2l0ZW1cIik7XHJcblxyXG5cdGFsbEl0ZW1zT2ZQbGF5ZXIuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0aXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2hvb3NlSXRlbSk7XHJcblx0fSk7XHJcblxyXG5cdHdpdGhkcmF3QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB3aXRoZHJhd0Zyb21DcmFzaCk7XHJcbn07XHJcblxyXG5hZGRBbGxVc2VySXRlbXMoKTtcclxuc2V0SXRlbXNPcmRlcigpO1xyXG5yZW5kZXJJdGVtcygpO1xyXG5hZGRMaXN0ZW5lcnMoKTtcclxuIl19
