var currentWinningItem,items={id0:{weapon:"M4A1-S",name:"M4A1-S Black Lotus",skin:"Black Lotus",color:"pink",imgDist:"../dist/img/m4a1s-black-lotus.jpg",price:27.15},id1:{weapon:"AWP",name:"AWP Chrome Cannon",skin:"Chrome Cannon",color:"red",imgDist:"../dist/img/awp-chrome-cannon.jpg",price:212.41},id2:{weapon:"Huntsman",name:"Huntsman Lore",skin:"Lore",color:"gold",imgDist:"../dist/img/huntsman-lore.jpg",price:307.24},id3:{weapon:"AK-47",name:"AK-47 Slate",skin:"Slate",color:"purple",imgDist:"../dist/img/ak-slate.jpg",price:10.61},id4:{weapon:"M4A4",name:"M4A4 Global Offensive",skin:"Global Offensive",color:"blue",imgDist:"../dist/img/m4a4-global-offensive.jpg",price:27.68},id5:{weapon:"AWP",name:"AWP Safari Mesh",skin:"Safari Mesh",color:"light-blue",imgDist:"../dist/img/awp-safari-mesh.jpg",price:2.09}},spinBtn=document.querySelector(".spin"),caseItemsBox=document.querySelector(".case__items"),countItemsAmount=Object.keys(items).length,winPupup=document.querySelector(".win-popup"),sellBtn=document.querySelector(".win-popup__btn--sell"),takeBtn=document.querySelector(".win-popup__btn--take"),winningItemImg=document.querySelector(".win-popup__img"),winningItemName=document.querySelector(".win-popup__item-name"),winningItemPrice=document.querySelector(".win-popup__item-price"),balanceAmount=document.querySelector(".user__balance--amount"),balanceAmountMobile=document.querySelector(".user-mobile__balance--amount"),createItemsInChest=function(){for(i=0;i<30;i++){var e=document.createElement("div"),t=document.createElement("img"),n=document.createElement("p"),a=document.createElement("p"),o=(e.classList.add("case__item"),t.classList.add("case__img"),n.classList.add("case__item-name"),a.classList.add("case__skin-name"),Math.floor(Math.random()*countItemsAmount));t.setAttribute("src",items["id".concat(o)].imgDist),t.setAttribute("alt",items["id".concat(o)].name),n.textContent=items["id".concat(o)].weapon,a.textContent=items["id".concat(o)].skin,e.id="id".concat(o),e.append(t,n,a),caseItemsBox.append(e)}},spinCase=function(){var e=Math.floor(1e3*Math.random()-2e3);caseItemsBox.style.left=e+"px",caseItemsBox.style.transition="left 5s ease",setTimeout(function(){var n=document.querySelector(".case__middle-point").getBoundingClientRect().x;e=document.querySelectorAll(".case__item"),i=null,a=1/0,e.forEach(function(e){var t=e.getBoundingClientRect().x+e.offsetWidth/2,t=Math.abs(t-n);t<a&&(a=t,i=e)});var i,a,e=i;e&&(currentWinningItem=e,winningItemImg.setAttribute("src",items["".concat(e.id)].imgDist),winningItemImg.setAttribute("alt",items["".concat(e.id)].name),winningItemName.textContent=items["".concat(e.id)].name,winningItemPrice.textContent=items["".concat(e.id)].price,hideWinPopup())},5e3)},hideWinPopup=function(){winPupup.classList.toggle("hidden"),resetBoxAnimation()},sellWinningItem=function(){var e=parseFloat(localStorage.getItem("Balance").slice(0,-1)),t=parseFloat(winningItemPrice.textContent);localStorage.setItem("Balance",e+t+"$"),hideWinPopup(),refreshBalance()},takeWinningItem=function(){null===localStorage.getItem(currentWinningItem.id)||NaN===localStorage.getItem(currentWinningItem.id)?localStorage.setItem(currentWinningItem.id,1):localStorage.setItem(currentWinningItem.id,parseInt(localStorage.getItem(currentWinningItem.id))+1),hideWinPopup()},refreshBalance=function(){balanceAmount.textContent=localStorage.getItem("Balance"),balanceAmountMobile.textContent=localStorage.getItem("Balance")},resetBoxAnimation=function(){caseItemsBox.innerHTML="",caseItemsBox.style.transition="0.01s",caseItemsBox.style.left="-3950px",createItemsInChest()};spinBtn.addEventListener("click",spinCase),takeBtn.addEventListener("click",takeWinningItem),sellBtn.addEventListener("click",sellWinningItem),createItemsInChest();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhc2UuanMiXSwibmFtZXMiOlsiY3VycmVudFdpbm5pbmdJdGVtIiwiaXRlbXMiLCJpZDAiLCJ3ZWFwb24iLCJza2luIiwiY29sb3IiLCJpbWdEaXN0IiwicHJpY2UiLCJpZDEiLCJpZDIiLCJpZDMiLCJpZDQiLCJpZDUiLCJzcGluQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2FzZUl0ZW1zQm94IiwibGVuZ3RoIiwiY291bnRJdGVtc0Ftb3VudCIsIk9iamVjdCIsIndpblB1cHVwIiwic2VsbEJ0biIsInRha2VCdG4iLCJ3aW5uaW5nSXRlbUltZyIsIndpbm5pbmdJdGVtTmFtZSIsIndpbm5pbmdJdGVtUHJpY2UiLCJjcmVhdGVJdGVtc0luQ2hlc3QiLCJpIiwiaXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJpdGVtSW1nIiwiaXRlbUl0ZW1OYW1lIiwiaXRlbVNraW5OYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwicmFuZG9tSXRlbSIsImZsb29yIiwic2V0QXR0cmlidXRlIiwicmFuZG9tIiwiY29uY2F0IiwibmFtZSIsInRleHRDb250ZW50IiwiaWQiLCJhcHBlbmQiLCJzcGluQ2FzZSIsInRyYW5zaXRpb24iLCJNYXRoIiwic3R5bGUiLCJsZWZ0IiwiaG93U3Ryb25nU3BpbiIsInJlZExpbmVYIiwic2V0VGltZW91dCIsImNsb3Nlc3RJdGVtIiwiY2xvc2VzdERpc3RhbmNlIiwiZm9yRWFjaCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJJbmZpbml0eSIsIml0ZW1DZW50ZXJYIiwieCIsIm9mZnNldFdpZHRoIiwiZGlzdGFuY2UiLCJhYnMiLCJ3aW5uaW5nSXRlbSIsImhpZGVXaW5Qb3B1cCIsInJlc2V0Qm94QW5pbWF0aW9uIiwic2VsbFdpbm5pbmdJdGVtIiwiY3VycmVudEJhbGFuY2UiLCJsb2NhbFN0b3JhZ2UiLCJwYXJzZUZsb2F0IiwiaG93TXVjaFRvQWRkVG9CYWxhbmNlIiwidGFrZVdpbm5pbmdJdGVtIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJzbGljZSIsImJhbGFuY2VBbW91bnQiLCJpdGVtUHJpY2UiLCJyZWZyZXNoQmFsYW5jZSIsImlubmVySFRNTCIsImFkZEV2ZW50TGlzdGVuZXIiLCJOYU4iLCJwYXJzZUludCIsImJhbGFuY2VBbW91bnRNb2JpbGUiXSwibWFwcGluZ3MiOiJBQUFBLElBK0RJQSxtQkEvREVDLE1BQVEsQ0FDYkMsSUFBSyxDQUROQyxPQUFXLFNBQ1ZELEtBQUsscUJBR0pFLEtBRkFELGNBR0FFLE1BRkksT0FHSkMsUUFGTSxvQ0FHTkMsTUFGSyxLQUdOLEVBQ0FDLElBRkNELENBQ0RKLE9BQUMsTUFDREssS0FBSyxvQkFHSkosS0FGQUQsZ0JBR0FFLE1BRkksTUFHSkMsUUFGTSxvQ0FHTkMsTUFGSyxNQUdOLEVBQ0FFLElBRkNGLENBQ0RKLE9BQUMsV0FDRE0sS0FBSyxnQkFHSkwsS0FGQUQsT0FHQUUsTUFGSSxPQUdKQyxRQUZNLGdDQUdOQyxNQUZLLE1BR04sRUFDQUcsSUFGQ0gsQ0FDREosT0FBQyxRQUNETyxLQUFLLGNBR0pOLEtBRkFELFFBR0FFLE1BRkksU0FHSkMsUUFGTSwyQkFHTkMsTUFGSyxLQUdOLEVBQ0FJLElBRkNKLENBQ0RKLE9BQUMsT0FDRFEsS0FBSyx3QkFHSlAsS0FGQUQsbUJBR0FFLE1BRkksT0FHSkMsUUFGTSx3Q0FHTkMsTUFGSyxLQUdOLEVBQ0FLLElBRkNMLENBQ0RKLE9BQUMsTUFDRFMsS0FBSyxrQkFHSlIsS0FGQUQsY0FHQUUsTUFGSSxhQUdKQyxRQUZNLGtDQUdOQyxNQUZLLElBR04sQ0FDRCxFQURDTSxRQUFBQyxTQUFBQyxjQUFBLE9BQUEsRUFDQUMsYUFBQUYsU0FBQUMsY0FBQSxjQUFBLEVBQ0tGLGlCQUFtQkUsT0FBQUEsS0FBY2QsS0FBQSxFQUFPZ0IsT0FDeENELFNBQVlGLFNBQUdBLGNBQVNDLFlBQWMsRUFDdENHLFFBQUFBLFNBQW1CQyxjQUFZbEIsdUJBQWEsRUFDNUNtQixRQUFXTixTQUFTQyxjQUFjLHVCQUFhLEVBQy9D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RUFBY2xDLFdBQWMyQixpQkFBYUksV0FBUSxFQUVqREosYUFBQUssUUFBQSxVQURvQmhDLEVBQTBCbUMsRUFDOUMsR0FBQSxFQUVEWixhQUFNQyxFQXZCTFksZUF3QmNDLENBdkJmLEVBMEJFcEQsZ0JBQW9CLFdBR3FCLE9BQTNDYixhQUFRa0UsUUFBQUEsbUJBQWtDckMsRUFBQyxHQUNPc0MsTUFBbEQxRCxhQUFReUQsUUFBQUEsbUJBQTBCUixFQUFBQSxFQUdsQzdDLGFBQUFBLFFBQW9CMUIsbUJBQUEwQyxHQUFBLENBQUEsRUF4QmxCMEIsYUFBYUssUUFDWnpFLG1CQUFtQjBDLEdBQ25CdUMsU0FBU2IsYUFBYUksUUFBUXhFLG1CQUFtQjBDLEVBQUUsQ0FBQyxFQUFJLENBQ3pELEVBRURzQixhQUFhLENBQ2QsRUFFTWEsZUFBaUIsV0FDdEJGLGNBQWNsQyxZQUFjMkIsYUFBYUksUUFBUSxTQUFTLEVBQzFEVSxvQkFBb0J6QyxZQUFjMkIsYUFBYUksUUFBUSxTQUFTLENBQ2pFLEVBRU1QLGtCQUFvQixXQUN4QmpELGFBQWE4RCxVQUFZLEdBQ3pCOUQsYUFBYStCLE1BQU1GLFdBQVksUUFDL0I3QixhQUFhK0IsTUFBTUMsS0FBUSxVQUMzQnRCLG1CQUFtQixDQUNyQixFQUVBYixRQUFRa0UsaUJBQWlCLFFBQVNuQyxRQUFRLEVBQzFDdEIsUUFBUXlELGlCQUFpQixRQUFTUixlQUFlLEVBQ2pEbEQsUUFBUTBELGlCQUFpQixRQUFTYixlQUFlLEVBRWpEeEMsbUJBQW1CIiwiZmlsZSI6ImNhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXRlbXMgPSB7XHJcblx0aWQwOiB7XHJcblx0XHR3ZWFwb246IFwiTTRBMS1TXCIsXHJcblx0XHRuYW1lOiBcIk00QTEtUyBCbGFjayBMb3R1c1wiLFxyXG5cdFx0c2tpbjogXCJCbGFjayBMb3R1c1wiLFxyXG5cdFx0Y29sb3I6IFwicGlua1wiLFxyXG5cdFx0aW1nRGlzdDogXCIuLi9kaXN0L2ltZy9tNGExcy1ibGFjay1sb3R1cy5qcGdcIixcclxuXHRcdHByaWNlOiAyNy4xNSxcclxuXHR9LFxyXG5cdGlkMToge1xyXG5cdFx0d2VhcG9uOiBcIkFXUFwiLFxyXG5cdFx0bmFtZTogXCJBV1AgQ2hyb21lIENhbm5vblwiLFxyXG5cdFx0c2tpbjogXCJDaHJvbWUgQ2Fubm9uXCIsXHJcblx0XHRjb2xvcjogXCJyZWRcIixcclxuXHRcdGltZ0Rpc3Q6IFwiLi4vZGlzdC9pbWcvYXdwLWNocm9tZS1jYW5ub24uanBnXCIsXHJcblx0XHRwcmljZTogMjEyLjQxLFxyXG5cdH0sXHJcblx0aWQyOiB7XHJcblx0XHR3ZWFwb246IFwiSHVudHNtYW5cIixcclxuXHRcdG5hbWU6IFwiSHVudHNtYW4gTG9yZVwiLFxyXG5cdFx0c2tpbjogXCJMb3JlXCIsXHJcblx0XHRjb2xvcjogXCJnb2xkXCIsXHJcblx0XHRpbWdEaXN0OiBcIi4uL2Rpc3QvaW1nL2h1bnRzbWFuLWxvcmUuanBnXCIsXHJcblx0XHRwcmljZTogMzA3LjI0LFxyXG5cdH0sXHJcblx0aWQzOiB7XHJcblx0XHR3ZWFwb246IFwiQUstNDdcIixcclxuXHRcdG5hbWU6IFwiQUstNDcgU2xhdGVcIixcclxuXHRcdHNraW46IFwiU2xhdGVcIixcclxuXHRcdGNvbG9yOiBcInB1cnBsZVwiLFxyXG5cdFx0aW1nRGlzdDogXCIuLi9kaXN0L2ltZy9hay1zbGF0ZS5qcGdcIixcclxuXHRcdHByaWNlOiAxMC42MSxcclxuXHR9LFxyXG5cdGlkNDoge1xyXG5cdFx0d2VhcG9uOiBcIk00QTRcIixcclxuXHRcdG5hbWU6IFwiTTRBNCBHbG9iYWwgT2ZmZW5zaXZlXCIsXHJcblx0XHRza2luOiBcIkdsb2JhbCBPZmZlbnNpdmVcIixcclxuXHRcdGNvbG9yOiBcImJsdWVcIixcclxuXHRcdGltZ0Rpc3Q6IFwiLi4vZGlzdC9pbWcvbTRhNC1nbG9iYWwtb2ZmZW5zaXZlLmpwZ1wiLFxyXG5cdFx0cHJpY2U6IDI3LjY4LFxyXG5cdH0sXHJcblx0aWQ1OiB7XHJcblx0XHR3ZWFwb246IFwiQVdQXCIsXHJcblx0XHRuYW1lOiBcIkFXUCBTYWZhcmkgTWVzaFwiLFxyXG5cdFx0c2tpbjogXCJTYWZhcmkgTWVzaFwiLFxyXG5cdFx0Y29sb3I6IFwibGlnaHQtYmx1ZVwiLFxyXG5cdFx0aW1nRGlzdDogXCIuLi9kaXN0L2ltZy9hd3Atc2FmYXJpLW1lc2guanBnXCIsXHJcblx0XHRwcmljZTogMi4wOSxcclxuXHR9LFxyXG59O1xyXG5jb25zdCBzcGluQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zcGluXCIpO1xyXG5jb25zdCBjYXNlSXRlbXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhc2VfX2l0ZW1zXCIpO1xyXG5jb25zdCBjb3VudEl0ZW1zQW1vdW50ID0gT2JqZWN0LmtleXMoaXRlbXMpLmxlbmd0aDtcclxuY29uc3Qgd2luUHVwdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cFwiKTtcclxuY29uc3Qgc2VsbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2luLXBvcHVwX19idG4tLXNlbGxcIik7XHJcbmNvbnN0IHRha2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cF9fYnRuLS10YWtlXCIpO1xyXG5jb25zdCB3aW5uaW5nSXRlbUltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2luLXBvcHVwX19pbWdcIik7XHJcbmNvbnN0IHdpbm5pbmdJdGVtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2luLXBvcHVwX19pdGVtLW5hbWVcIik7XHJcbmNvbnN0IHdpbm5pbmdJdGVtUHJpY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cF9faXRlbS1wcmljZVwiKTtcclxuY29uc3QgYmFsYW5jZUFtb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9fYmFsYW5jZS0tYW1vdW50XCIpO1xyXG5jb25zdCBiYWxhbmNlQW1vdW50TW9iaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi51c2VyLW1vYmlsZV9fYmFsYW5jZS0tYW1vdW50XCJcclxuKTtcclxubGV0IGN1cnJlbnRXaW5uaW5nSXRlbTtcclxuXHJcbmNvbnN0IGNyZWF0ZUl0ZW1zSW5DaGVzdCA9ICgpID0+IHtcclxuXHRmb3IgKGkgPSAwOyBpIDwgMzA7IGkrKykge1xyXG5cdFx0Y29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRjb25zdCBpdGVtSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuXHRcdGNvbnN0IGl0ZW1JdGVtTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cdFx0Y29uc3QgaXRlbVNraW5OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRpdGVtLmNsYXNzTGlzdC5hZGQoXCJjYXNlX19pdGVtXCIpO1xyXG5cdFx0aXRlbUltZy5jbGFzc0xpc3QuYWRkKFwiY2FzZV9faW1nXCIpO1xyXG5cdFx0aXRlbUl0ZW1OYW1lLmNsYXNzTGlzdC5hZGQoXCJjYXNlX19pdGVtLW5hbWVcIik7XHJcblx0XHRpdGVtU2tpbk5hbWUuY2xhc3NMaXN0LmFkZChcImNhc2VfX3NraW4tbmFtZVwiKTtcclxuXHJcblx0XHRjb25zdCByYW5kb21JdGVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY291bnRJdGVtc0Ftb3VudCk7XHJcblxyXG5cdFx0aXRlbUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgaXRlbXNbYGlkJHtyYW5kb21JdGVtfWBdLmltZ0Rpc3QpO1xyXG5cdFx0aXRlbUltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgaXRlbXNbYGlkJHtyYW5kb21JdGVtfWBdLm5hbWUpO1xyXG5cdFx0aXRlbUl0ZW1OYW1lLnRleHRDb250ZW50ID0gaXRlbXNbYGlkJHtyYW5kb21JdGVtfWBdLndlYXBvbjtcclxuXHRcdGl0ZW1Ta2luTmFtZS50ZXh0Q29udGVudCA9IGl0ZW1zW2BpZCR7cmFuZG9tSXRlbX1gXS5za2luO1xyXG5cclxuXHRcdGl0ZW0uaWQgPSBgaWQke3JhbmRvbUl0ZW19YDtcclxuXHRcdGl0ZW0uYXBwZW5kKGl0ZW1JbWcsIGl0ZW1JdGVtTmFtZSwgaXRlbVNraW5OYW1lKTtcclxuXHRcdGNhc2VJdGVtc0JveC5hcHBlbmQoaXRlbSk7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gRnVua2NqYSBvZHBvd2llZHppYWxuYSB6YSBsb3Nvd2UgcHJ6ZXN1bmnEmWNpZVxyXG5jb25zdCBzcGluQ2FzZSA9ICgpID0+IHtcclxuXHQvLyBMb3Nvd2UgcHJ6ZXN1bmnEmWNpZSBtacSZZHp5IC0yMDAwIGEgLTEwMDAgcHhcclxuXHRjb25zdCBob3dTdHJvbmdTcGluID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCAtIDIwMDApO1xyXG5cclxuXHQvLyBVc3Rhd2llbmllIHByemVzdW5pxJljaWEgZWxlbWVudMOzdyB6IGFuaW1hY2rEhVxyXG5cdGNhc2VJdGVtc0JveC5zdHlsZS5sZWZ0ID0gaG93U3Ryb25nU3BpbiArIFwicHhcIjtcclxuICBjYXNlSXRlbXNCb3guc3R5bGUudHJhbnNpdGlvbj0gXCJsZWZ0IDVzIGVhc2VcIjtcclxuXHJcblx0Ly8gUG8gemFrb8WEY3plbml1IGFuaW1hY2ppIHBvIDUgc2VrdW5kYWNoLCB6bmFqZMW6IHp3eWNpxJlza2kgZWxlbWVudFxyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0Y29uc3QgcmVkTGluZVggPSBkb2N1bWVudFxyXG5cdFx0XHQucXVlcnlTZWxlY3RvcihcIi5jYXNlX19taWRkbGUtcG9pbnRcIilcclxuXHRcdFx0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLng7XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0V2lubmluZ0l0ZW0oKSB7XHJcblx0XHRcdGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXNlX19pdGVtXCIpO1xyXG5cdFx0XHRsZXQgY2xvc2VzdEl0ZW0gPSBudWxsO1xyXG5cdFx0XHRsZXQgY2xvc2VzdERpc3RhbmNlID0gSW5maW5pdHk7XHJcblxyXG5cdFx0XHRpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgaXRlbUNlbnRlclggPVxyXG5cdFx0XHRcdFx0aXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54ICsgaXRlbS5vZmZzZXRXaWR0aCAvIDI7XHJcblx0XHRcdFx0Y29uc3QgZGlzdGFuY2UgPSBNYXRoLmFicyhpdGVtQ2VudGVyWCAtIHJlZExpbmVYKTtcclxuXHJcblx0XHRcdFx0aWYgKGRpc3RhbmNlIDwgY2xvc2VzdERpc3RhbmNlKSB7XHJcblx0XHRcdFx0XHRjbG9zZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuXHRcdFx0XHRcdGNsb3Nlc3RJdGVtID0gaXRlbTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmV0dXJuIGNsb3Nlc3RJdGVtO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFpuYWpkxbogd3lncnl3YWrEhWN5IGVsZW1lbnQgaSB6bWllxYQgamVnbyBrb2xvclxyXG5cdFx0Y29uc3Qgd2lubmluZ0l0ZW0gPSBnZXRXaW5uaW5nSXRlbSgpO1xyXG5cdFx0aWYgKHdpbm5pbmdJdGVtKSB7XHJcblx0XHRcdGN1cnJlbnRXaW5uaW5nSXRlbSA9IHdpbm5pbmdJdGVtO1xyXG5cdFx0XHR3aW5uaW5nSXRlbUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgaXRlbXNbYCR7d2lubmluZ0l0ZW0uaWR9YF0uaW1nRGlzdCk7XHJcblx0XHRcdHdpbm5pbmdJdGVtSW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBpdGVtc1tgJHt3aW5uaW5nSXRlbS5pZH1gXS5uYW1lKTtcclxuXHRcdFx0d2lubmluZ0l0ZW1OYW1lLnRleHRDb250ZW50ID0gaXRlbXNbYCR7d2lubmluZ0l0ZW0uaWR9YF0ubmFtZTtcclxuXHRcdFx0d2lubmluZ0l0ZW1QcmljZS50ZXh0Q29udGVudCA9IGl0ZW1zW2Ake3dpbm5pbmdJdGVtLmlkfWBdLnByaWNlO1xyXG5cdFx0XHRoaWRlV2luUG9wdXAoKTtcclxuXHRcdH1cclxuXHR9LCA1MDAwKTsgLy8gVXJ1Y2hvbSBwbyB6YWtvxYRjemVuaXUgYW5pbWFjamlcclxufTtcclxuXHJcbmNvbnN0IGhpZGVXaW5Qb3B1cCA9ICgpID0+IHtcclxuXHR3aW5QdXB1cC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xyXG4gIHJlc2V0Qm94QW5pbWF0aW9uKCk7XHJcbn07XHJcblxyXG5jb25zdCBzZWxsV2lubmluZ0l0ZW0gPSAoKSA9PiB7XHJcblx0Y29uc3QgY3VycmVudEJhbGFuY2UgPSBwYXJzZUZsb2F0KFxyXG5cdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpLnNsaWNlKDAsIC0xKVxyXG5cdCk7XHJcblx0Y29uc3QgaXRlbVByaWNlID0gcGFyc2VGbG9hdCh3aW5uaW5nSXRlbVByaWNlLnRleHRDb250ZW50KTtcclxuXHRjb25zdCBob3dNdWNoVG9BZGRUb0JhbGFuY2UgPSBjdXJyZW50QmFsYW5jZSArIGl0ZW1QcmljZTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgaG93TXVjaFRvQWRkVG9CYWxhbmNlICsgXCIkXCIpO1xyXG5cdGhpZGVXaW5Qb3B1cCgpO1xyXG5cdHJlZnJlc2hCYWxhbmNlKCk7XHJcbn07XHJcblxyXG5jb25zdCB0YWtlV2lubmluZ0l0ZW0gPSAoKSA9PiB7XHJcblx0aWYgKFxyXG5cdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oY3VycmVudFdpbm5pbmdJdGVtLmlkKSA9PT0gbnVsbCB8fFxyXG5cdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oY3VycmVudFdpbm5pbmdJdGVtLmlkKSA9PT0gTmFOXHJcblx0KSB7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjdXJyZW50V2lubmluZ0l0ZW0uaWQsIDEpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcclxuXHRcdFx0Y3VycmVudFdpbm5pbmdJdGVtLmlkLFxyXG5cdFx0XHRwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjdXJyZW50V2lubmluZ0l0ZW0uaWQpKSArIDFcclxuXHRcdCk7XHJcblx0fVxyXG5cdGhpZGVXaW5Qb3B1cCgpO1xyXG59O1xyXG5cclxuY29uc3QgcmVmcmVzaEJhbGFuY2UgPSAoKSA9PiB7XHJcblx0YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKTtcclxuXHRiYWxhbmNlQW1vdW50TW9iaWxlLnRleHRDb250ZW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpO1xyXG59O1xyXG5cclxuY29uc3QgcmVzZXRCb3hBbmltYXRpb24gPSAoKSA9PiB7XHJcbiAgY2FzZUl0ZW1zQm94LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgY2FzZUl0ZW1zQm94LnN0eWxlLnRyYW5zaXRpb249IFwiMC4wMXNcIjtcclxuICBjYXNlSXRlbXNCb3guc3R5bGUubGVmdCA9ICBcIi0zOTUwcHhcIjtcclxuICBjcmVhdGVJdGVtc0luQ2hlc3QoKTtcclxufVxyXG5cclxuc3BpbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3BpbkNhc2UpO1xyXG50YWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0YWtlV2lubmluZ0l0ZW0pO1xyXG5zZWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxsV2lubmluZ0l0ZW0pO1xyXG5cclxuY3JlYXRlSXRlbXNJbkNoZXN0KCk7XHJcbiJdfQ==
