var currentWinningItem,items2={id0:{weapon:"M4A1-S",name:"M4A1-S Black Lotus",skin:"Black Lotus",color:"pink",imgDist:"../dist/img/m4a1s-black-lotus.jpg",price:27.15},id1:{weapon:"AWP",name:"AWP Chrome Cannon",skin:"Chrome Cannon",color:"red",imgDist:"../dist/img/awp-chrome-cannon.jpg",price:212.41},id2:{weapon:"Huntsman",name:"Huntsman Lore",skin:"Lore",color:"gold",imgDist:"../dist/img/huntsman-lore.jpg",price:307.24},id3:{weapon:"AK-47",name:"AK-47 Slate",skin:"Slate",color:"purple",imgDist:"../dist/img/ak-slate.jpg",price:10.61},id4:{weapon:"M4A4",name:"M4A4 Global Offensive",skin:"Global Offensive",color:"blue",imgDist:"../dist/img/m4a4-global-offensive.jpg",price:27.68},id5:{weapon:"AWP",name:"AWP Safari Mesh",skin:"Safari Mesh",color:"light-blue",imgDist:"../dist/img/awp-safari-mesh.jpg",price:2.09}},spinBtn=document.querySelector(".spin"),caseItemsBox=document.querySelector(".case__items"),countItemsAmount=Object.keys(items2).length,winPupup=document.querySelector(".win-popup"),sellBtn=document.querySelector(".win-popup__btn--sell"),takeBtn=document.querySelector(".win-popup__btn--take"),winningItemImg=document.querySelector(".win-popup__img"),winningItemName=document.querySelector(".win-popup__item-name"),winningItemPrice=document.querySelector(".win-popup__item-price"),balanceAmount=document.querySelector(".user__balance--amount"),balanceAmountMobile=document.querySelector(".user-mobile__balance--amount"),createItemsInChest=function(){for(i=0;i<30;i++){var e=document.createElement("div"),t=document.createElement("img"),n=document.createElement("p"),a=document.createElement("p"),o=(e.classList.add("case__item"),t.classList.add("case__img"),n.classList.add("case__item-name"),a.classList.add("case__skin-name"),Math.floor(Math.random()*countItemsAmount));t.setAttribute("src",items2["id".concat(o)].imgDist),t.setAttribute("alt",items2["id".concat(o)].name),n.textContent=items2["id".concat(o)].weapon,a.textContent=items2["id".concat(o)].skin,e.id="id".concat(o),e.append(t,n,a),caseItemsBox.append(e)}},spinCase=function(){var e=Math.floor(1e3*Math.random()-2e3);caseItemsBox.style.left=e+"px",caseItemsBox.style.transition="left 5s ease",setTimeout(function(){var n=document.querySelector(".case__middle-point").getBoundingClientRect().x;e=document.querySelectorAll(".case__item"),i=null,a=1/0,e.forEach(function(e){var t=e.getBoundingClientRect().x+e.offsetWidth/2,t=Math.abs(t-n);t<a&&(a=t,i=e)});var i,a,e=i;e&&(currentWinningItem=e,winningItemImg.setAttribute("src",items2["".concat(e.id)].imgDist),winningItemImg.setAttribute("alt",items2["".concat(e.id)].name),winningItemName.textContent=items2["".concat(e.id)].name,winningItemPrice.textContent=items2["".concat(e.id)].price,hideWinPopup())},5e3)},hideWinPopup=function(){winPupup.classList.toggle("hidden"),resetBoxAnimation()},sellWinningItem=function(){var e=parseFloat(localStorage.getItem("Balance").slice(0,-1)),t=parseFloat(winningItemPrice.textContent);localStorage.setItem("Balance",e+t+"$"),hideWinPopup(),refreshBalance()},takeWinningItem=function(){null===localStorage.getItem(currentWinningItem.id)||NaN===localStorage.getItem(currentWinningItem.id)?localStorage.setItem(currentWinningItem.id,1):localStorage.setItem(currentWinningItem.id,parseInt(localStorage.getItem(currentWinningItem.id))+1),hideWinPopup()},refreshBalance=function(){balanceAmount.textContent=localStorage.getItem("Balance"),balanceAmountMobile.textContent=localStorage.getItem("Balance")},resetBoxAnimation=function(){caseItemsBox.innerHTML="",caseItemsBox.style.transition="0.01s",caseItemsBox.style.left="-3950px",createItemsInChest()};spinBtn.addEventListener("click",spinCase),takeBtn.addEventListener("click",takeWinningItem),sellBtn.addEventListener("click",sellWinningItem),createItemsInChest();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhc2UuanMiXSwibmFtZXMiOlsiY3VycmVudFdpbm5pbmdJdGVtIiwiaXRlbXMyIiwiaWQwIiwid2VhcG9uIiwic2tpbiIsImNvbG9yIiwiaW1nRGlzdCIsInByaWNlIiwiaWQxIiwiaWQyIiwiaWQzIiwiaWQ0IiwiaWQ1Iiwic3BpbkJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNhc2VJdGVtc0JveCIsImxlbmd0aCIsImNvdW50SXRlbXNBbW91bnQiLCJPYmplY3QiLCJ3aW5QdXB1cCIsInNlbGxCdG4iLCJ0YWtlQnRuIiwid2lubmluZ0l0ZW1JbWciLCJ3aW5uaW5nSXRlbU5hbWUiLCJ3aW5uaW5nSXRlbVByaWNlIiwiY3JlYXRlSXRlbXNJbkNoZXN0IiwiaSIsIml0ZW0iLCJjcmVhdGVFbGVtZW50IiwiaXRlbUltZyIsIml0ZW1JdGVtTmFtZSIsIml0ZW1Ta2luTmFtZSIsImNsYXNzTGlzdCIsImFkZCIsInJhbmRvbUl0ZW0iLCJmbG9vciIsInNldEF0dHJpYnV0ZSIsImNvbmNhdCIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsImlkIiwiYXBwZW5kIiwic3BpbkNhc2UiLCJ0cmFuc2l0aW9uIiwiTWF0aCIsInJhbmRvbSIsInN0eWxlIiwibGVmdCIsImhvd1N0cm9uZ1NwaW4iLCJyZWRMaW5lWCIsInNldFRpbWVvdXQiLCJjbG9zZXN0SXRlbSIsImNsb3Nlc3REaXN0YW5jZSIsImZvckVhY2giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJpdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJJbmZpbml0eSIsIml0ZW1DZW50ZXJYIiwieCIsIm9mZnNldFdpZHRoIiwiZGlzdGFuY2UiLCJhYnMiLCJ3aW5uaW5nSXRlbSIsImhpZGVXaW5Qb3B1cCIsInJlc2V0Qm94QW5pbWF0aW9uIiwic2VsbFdpbm5pbmdJdGVtIiwiY3VycmVudEJhbGFuY2UiLCJsb2NhbFN0b3JhZ2UiLCJwYXJzZUZsb2F0IiwiaG93TXVjaFRvQWRkVG9CYWxhbmNlIiwidGFrZVdpbm5pbmdJdGVtIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJzbGljZSIsImJhbGFuY2VBbW91bnQiLCJpdGVtUHJpY2UiLCJyZWZyZXNoQmFsYW5jZSIsImlubmVySFRNTCIsImFkZEV2ZW50TGlzdGVuZXIiLCJOYU4iLCJwYXJzZUludCIsImJhbGFuY2VBbW91bnRNb2JpbGUiXSwibWFwcGluZ3MiOiJBQUFBLElBK0RJQSxtQkEvREVDLE9BQVMsQ0FDZEMsSUFBSyxDQUROQyxPQUFZLFNBQ1hELEtBQUsscUJBR0pFLEtBRkFELGNBR0FFLE1BRkksT0FHSkMsUUFGTSxvQ0FHTkMsTUFGSyxLQUdOLEVBQ0FDLElBRkNELENBQ0RKLE9BQUMsTUFDREssS0FBSyxvQkFHSkosS0FGQUQsZ0JBR0FFLE1BRkksTUFHSkMsUUFGTSxvQ0FHTkMsTUFGSyxNQUdOLEVBQ0FFLElBRkNGLENBQ0RKLE9BQUMsV0FDRE0sS0FBSyxnQkFHSkwsS0FGQUQsT0FHQUUsTUFGSSxPQUdKQyxRQUZNLGdDQUdOQyxNQUZLLE1BR04sRUFDQUcsSUFGQ0gsQ0FDREosT0FBQyxRQUNETyxLQUFLLGNBR0pOLEtBRkFELFFBR0FFLE1BRkksU0FHSkMsUUFGTSwyQkFHTkMsTUFGSyxLQUdOLEVBQ0FJLElBRkNKLENBQ0RKLE9BQUMsT0FDRFEsS0FBSyx3QkFHSlAsS0FGQUQsbUJBR0FFLE1BRkksT0FHSkMsUUFGTSx3Q0FHTkMsTUFGSyxLQUdOLEVBQ0FLLElBRkNMLENBQ0RKLE9BQUMsTUFDRFMsS0FBSyxrQkFHSlIsS0FGQUQsY0FHQUUsTUFGSSxhQUdKQyxRQUZNLGtDQUdOQyxNQUZLLElBR04sQ0FDRCxFQURDTSxRQUFBQyxTQUFBQyxjQUFBLE9BQUEsRUFDQUMsYUFBQUYsU0FBQUMsY0FBQSxjQUFBLEVBQ0tGLGlCQUFtQkUsT0FBQUEsS0FBY2QsTUFBQSxFQUFRZ0IsT0FDekNELFNBQVlGLFNBQUdBLGNBQVNDLFlBQWMsRUFDdENHLFFBQUFBLFNBQW1CQyxjQUFZbEIsdUJBQWMsRUFDN0NtQixRQUFXTixTQUFTQyxjQUFjLHVC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QyxFQUFjcEMsV0FBYzZCLGlCQUFhSSxXQUFRLEVBRWpESixhQUFBSyxRQUFBLFVBRG9CbEMsRUFBMEJxQyxFQUM5QyxHQUFBLEVBRURaLGFBQU1DLEVBdkJMWSxlQXdCY0MsQ0F2QmYsRUEwQkVyRCxnQkFBb0IsV0FHcUIsT0FBM0NiLGFBQVFtRSxRQUFBQSxtQkFBa0N2QyxFQUFDLEdBQ093QyxNQUFsRDNELGFBQVEwRCxRQUFBQSxtQkFBMEJSLEVBQUFBLEVBR2xDOUMsYUFBQUEsUUFBb0IxQixtQkFBQXlDLEdBQUEsQ0FBQSxFQXhCbEI0QixhQUFhSyxRQUNaMUUsbUJBQW1CeUMsR0FDbkJ5QyxTQUFTYixhQUFhSSxRQUFRekUsbUJBQW1CeUMsRUFBRSxDQUFDLEVBQUksQ0FDekQsRUFFRHdCLGFBQWEsQ0FDZCxFQUVNYSxlQUFpQixXQUN0QkYsY0FBY3BDLFlBQWM2QixhQUFhSSxRQUFRLFNBQVMsRUFDMURVLG9CQUFvQjNDLFlBQWM2QixhQUFhSSxRQUFRLFNBQVMsQ0FDakUsRUFFTVAsa0JBQW9CLFdBQ3hCbEQsYUFBYStELFVBQVksR0FDekIvRCxhQUFhK0IsTUFBTUgsV0FBWSxRQUMvQjVCLGFBQWErQixNQUFNQyxLQUFRLFVBQzNCdEIsbUJBQW1CLENBQ3JCLEVBRUFiLFFBQVFtRSxpQkFBaUIsUUFBU3JDLFFBQVEsRUFDMUNyQixRQUFRMEQsaUJBQWlCLFFBQVNSLGVBQWUsRUFDakRuRCxRQUFRMkQsaUJBQWlCLFFBQVNiLGVBQWUsRUFFakR6QyxtQkFBbUIiLCJmaWxlIjoiY2FzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpdGVtczIgPSB7XHJcblx0aWQwOiB7XHJcblx0XHR3ZWFwb246IFwiTTRBMS1TXCIsXHJcblx0XHRuYW1lOiBcIk00QTEtUyBCbGFjayBMb3R1c1wiLFxyXG5cdFx0c2tpbjogXCJCbGFjayBMb3R1c1wiLFxyXG5cdFx0Y29sb3I6IFwicGlua1wiLFxyXG5cdFx0aW1nRGlzdDogXCIuLi9kaXN0L2ltZy9tNGExcy1ibGFjay1sb3R1cy5qcGdcIixcclxuXHRcdHByaWNlOiAyNy4xNSxcclxuXHR9LFxyXG5cdGlkMToge1xyXG5cdFx0d2VhcG9uOiBcIkFXUFwiLFxyXG5cdFx0bmFtZTogXCJBV1AgQ2hyb21lIENhbm5vblwiLFxyXG5cdFx0c2tpbjogXCJDaHJvbWUgQ2Fubm9uXCIsXHJcblx0XHRjb2xvcjogXCJyZWRcIixcclxuXHRcdGltZ0Rpc3Q6IFwiLi4vZGlzdC9pbWcvYXdwLWNocm9tZS1jYW5ub24uanBnXCIsXHJcblx0XHRwcmljZTogMjEyLjQxLFxyXG5cdH0sXHJcblx0aWQyOiB7XHJcblx0XHR3ZWFwb246IFwiSHVudHNtYW5cIixcclxuXHRcdG5hbWU6IFwiSHVudHNtYW4gTG9yZVwiLFxyXG5cdFx0c2tpbjogXCJMb3JlXCIsXHJcblx0XHRjb2xvcjogXCJnb2xkXCIsXHJcblx0XHRpbWdEaXN0OiBcIi4uL2Rpc3QvaW1nL2h1bnRzbWFuLWxvcmUuanBnXCIsXHJcblx0XHRwcmljZTogMzA3LjI0LFxyXG5cdH0sXHJcblx0aWQzOiB7XHJcblx0XHR3ZWFwb246IFwiQUstNDdcIixcclxuXHRcdG5hbWU6IFwiQUstNDcgU2xhdGVcIixcclxuXHRcdHNraW46IFwiU2xhdGVcIixcclxuXHRcdGNvbG9yOiBcInB1cnBsZVwiLFxyXG5cdFx0aW1nRGlzdDogXCIuLi9kaXN0L2ltZy9hay1zbGF0ZS5qcGdcIixcclxuXHRcdHByaWNlOiAxMC42MSxcclxuXHR9LFxyXG5cdGlkNDoge1xyXG5cdFx0d2VhcG9uOiBcIk00QTRcIixcclxuXHRcdG5hbWU6IFwiTTRBNCBHbG9iYWwgT2ZmZW5zaXZlXCIsXHJcblx0XHRza2luOiBcIkdsb2JhbCBPZmZlbnNpdmVcIixcclxuXHRcdGNvbG9yOiBcImJsdWVcIixcclxuXHRcdGltZ0Rpc3Q6IFwiLi4vZGlzdC9pbWcvbTRhNC1nbG9iYWwtb2ZmZW5zaXZlLmpwZ1wiLFxyXG5cdFx0cHJpY2U6IDI3LjY4LFxyXG5cdH0sXHJcblx0aWQ1OiB7XHJcblx0XHR3ZWFwb246IFwiQVdQXCIsXHJcblx0XHRuYW1lOiBcIkFXUCBTYWZhcmkgTWVzaFwiLFxyXG5cdFx0c2tpbjogXCJTYWZhcmkgTWVzaFwiLFxyXG5cdFx0Y29sb3I6IFwibGlnaHQtYmx1ZVwiLFxyXG5cdFx0aW1nRGlzdDogXCIuLi9kaXN0L2ltZy9hd3Atc2FmYXJpLW1lc2guanBnXCIsXHJcblx0XHRwcmljZTogMi4wOSxcclxuXHR9LFxyXG59O1xyXG5jb25zdCBzcGluQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zcGluXCIpO1xyXG5jb25zdCBjYXNlSXRlbXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhc2VfX2l0ZW1zXCIpO1xyXG5jb25zdCBjb3VudEl0ZW1zQW1vdW50ID0gT2JqZWN0LmtleXMoaXRlbXMyKS5sZW5ndGg7XHJcbmNvbnN0IHdpblB1cHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tcG9wdXBcIik7XHJcbmNvbnN0IHNlbGxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cF9fYnRuLS1zZWxsXCIpO1xyXG5jb25zdCB0YWtlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tcG9wdXBfX2J0bi0tdGFrZVwiKTtcclxuY29uc3Qgd2lubmluZ0l0ZW1JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cF9faW1nXCIpO1xyXG5jb25zdCB3aW5uaW5nSXRlbU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbi1wb3B1cF9faXRlbS1uYW1lXCIpO1xyXG5jb25zdCB3aW5uaW5nSXRlbVByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tcG9wdXBfX2l0ZW0tcHJpY2VcIik7XHJcbmNvbnN0IGJhbGFuY2VBbW91bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX2JhbGFuY2UtLWFtb3VudFwiKTtcclxuY29uc3QgYmFsYW5jZUFtb3VudE1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIudXNlci1tb2JpbGVfX2JhbGFuY2UtLWFtb3VudFwiXHJcbik7XHJcbmxldCBjdXJyZW50V2lubmluZ0l0ZW07XHJcblxyXG5jb25zdCBjcmVhdGVJdGVtc0luQ2hlc3QgPSAoKSA9PiB7XHJcblx0Zm9yIChpID0gMDsgaSA8IDMwOyBpKyspIHtcclxuXHRcdGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0Y29uc3QgaXRlbUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcblx0XHRjb25zdCBpdGVtSXRlbU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuXHRcdGNvbnN0IGl0ZW1Ta2luTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cdFx0aXRlbS5jbGFzc0xpc3QuYWRkKFwiY2FzZV9faXRlbVwiKTtcclxuXHRcdGl0ZW1JbWcuY2xhc3NMaXN0LmFkZChcImNhc2VfX2ltZ1wiKTtcclxuXHRcdGl0ZW1JdGVtTmFtZS5jbGFzc0xpc3QuYWRkKFwiY2FzZV9faXRlbS1uYW1lXCIpO1xyXG5cdFx0aXRlbVNraW5OYW1lLmNsYXNzTGlzdC5hZGQoXCJjYXNlX19za2luLW5hbWVcIik7XHJcblxyXG5cdFx0Y29uc3QgcmFuZG9tSXRlbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvdW50SXRlbXNBbW91bnQpO1xyXG5cclxuXHRcdGl0ZW1JbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIGl0ZW1zMltgaWQke3JhbmRvbUl0ZW19YF0uaW1nRGlzdCk7XHJcblx0XHRpdGVtSW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBpdGVtczJbYGlkJHtyYW5kb21JdGVtfWBdLm5hbWUpO1xyXG5cdFx0aXRlbUl0ZW1OYW1lLnRleHRDb250ZW50ID0gaXRlbXMyW2BpZCR7cmFuZG9tSXRlbX1gXS53ZWFwb247XHJcblx0XHRpdGVtU2tpbk5hbWUudGV4dENvbnRlbnQgPSBpdGVtczJbYGlkJHtyYW5kb21JdGVtfWBdLnNraW47XHJcblxyXG5cdFx0aXRlbS5pZCA9IGBpZCR7cmFuZG9tSXRlbX1gO1xyXG5cdFx0aXRlbS5hcHBlbmQoaXRlbUltZywgaXRlbUl0ZW1OYW1lLCBpdGVtU2tpbk5hbWUpO1xyXG5cdFx0Y2FzZUl0ZW1zQm94LmFwcGVuZChpdGVtKTtcclxuXHR9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIG9kcG93aWVkemlhbG5hIHphIGxvc293ZSBwcnplc3VuacSZY2llXHJcbmNvbnN0IHNwaW5DYXNlID0gKCkgPT4ge1xyXG5cdC8vIExvc293ZSBwcnplc3VuacSZY2llIG1pxJlkenkgLTIwMDAgYSAtMTAwMCBweFxyXG5cdGNvbnN0IGhvd1N0cm9uZ1NwaW4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwIC0gMjAwMCk7XHJcblxyXG5cdC8vIFVzdGF3aWVuaWUgcHJ6ZXN1bmnEmWNpYSBlbGVtZW50w7N3IHogYW5pbWFjasSFXHJcblx0Y2FzZUl0ZW1zQm94LnN0eWxlLmxlZnQgPSBob3dTdHJvbmdTcGluICsgXCJweFwiO1xyXG4gIGNhc2VJdGVtc0JveC5zdHlsZS50cmFuc2l0aW9uPSBcImxlZnQgNXMgZWFzZVwiO1xyXG5cclxuXHQvLyBQbyB6YWtvxYRjemVuaXUgYW5pbWFjamkgcG8gNSBzZWt1bmRhY2gsIHpuYWpkxbogend5Y2nEmXNraSBlbGVtZW50XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRjb25zdCByZWRMaW5lWCA9IGRvY3VtZW50XHJcblx0XHRcdC5xdWVyeVNlbGVjdG9yKFwiLmNhc2VfX21pZGRsZS1wb2ludFwiKVxyXG5cdFx0XHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueDtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRXaW5uaW5nSXRlbSgpIHtcclxuXHRcdFx0Y29uc3QgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhc2VfX2l0ZW1cIik7XHJcblx0XHRcdGxldCBjbG9zZXN0SXRlbSA9IG51bGw7XHJcblx0XHRcdGxldCBjbG9zZXN0RGlzdGFuY2UgPSBJbmZpbml0eTtcclxuXHJcblx0XHRcdGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRjb25zdCBpdGVtQ2VudGVyWCA9XHJcblx0XHRcdFx0XHRpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnggKyBpdGVtLm9mZnNldFdpZHRoIC8gMjtcclxuXHRcdFx0XHRjb25zdCBkaXN0YW5jZSA9IE1hdGguYWJzKGl0ZW1DZW50ZXJYIC0gcmVkTGluZVgpO1xyXG5cclxuXHRcdFx0XHRpZiAoZGlzdGFuY2UgPCBjbG9zZXN0RGlzdGFuY2UpIHtcclxuXHRcdFx0XHRcdGNsb3Nlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG5cdFx0XHRcdFx0Y2xvc2VzdEl0ZW0gPSBpdGVtO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gY2xvc2VzdEl0ZW07XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gWm5hamTFuiB3eWdyeXdhasSFY3kgZWxlbWVudCBpIHptaWXFhCBqZWdvIGtvbG9yXHJcblx0XHRjb25zdCB3aW5uaW5nSXRlbSA9IGdldFdpbm5pbmdJdGVtKCk7XHJcblx0XHRpZiAod2lubmluZ0l0ZW0pIHtcclxuXHRcdFx0Y3VycmVudFdpbm5pbmdJdGVtID0gd2lubmluZ0l0ZW07XHJcblx0XHRcdHdpbm5pbmdJdGVtSW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBpdGVtczJbYCR7d2lubmluZ0l0ZW0uaWR9YF0uaW1nRGlzdCk7XHJcblx0XHRcdHdpbm5pbmdJdGVtSW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBpdGVtczJbYCR7d2lubmluZ0l0ZW0uaWR9YF0ubmFtZSk7XHJcblx0XHRcdHdpbm5pbmdJdGVtTmFtZS50ZXh0Q29udGVudCA9IGl0ZW1zMltgJHt3aW5uaW5nSXRlbS5pZH1gXS5uYW1lO1xyXG5cdFx0XHR3aW5uaW5nSXRlbVByaWNlLnRleHRDb250ZW50ID0gaXRlbXMyW2Ake3dpbm5pbmdJdGVtLmlkfWBdLnByaWNlO1xyXG5cdFx0XHRoaWRlV2luUG9wdXAoKTtcclxuXHRcdH1cclxuXHR9LCA1MDAwKTsgLy8gVXJ1Y2hvbSBwbyB6YWtvxYRjemVuaXUgYW5pbWFjamlcclxufTtcclxuXHJcbmNvbnN0IGhpZGVXaW5Qb3B1cCA9ICgpID0+IHtcclxuXHR3aW5QdXB1cC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xyXG4gIHJlc2V0Qm94QW5pbWF0aW9uKCk7XHJcbn07XHJcblxyXG5jb25zdCBzZWxsV2lubmluZ0l0ZW0gPSAoKSA9PiB7XHJcblx0Y29uc3QgY3VycmVudEJhbGFuY2UgPSBwYXJzZUZsb2F0KFxyXG5cdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpLnNsaWNlKDAsIC0xKVxyXG5cdCk7XHJcblx0Y29uc3QgaXRlbVByaWNlID0gcGFyc2VGbG9hdCh3aW5uaW5nSXRlbVByaWNlLnRleHRDb250ZW50KTtcclxuXHRjb25zdCBob3dNdWNoVG9BZGRUb0JhbGFuY2UgPSBjdXJyZW50QmFsYW5jZSArIGl0ZW1QcmljZTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgaG93TXVjaFRvQWRkVG9CYWxhbmNlICsgXCIkXCIpO1xyXG5cdGhpZGVXaW5Qb3B1cCgpO1xyXG5cdHJlZnJlc2hCYWxhbmNlKCk7XHJcbn07XHJcblxyXG5jb25zdCB0YWtlV2lubmluZ0l0ZW0gPSAoKSA9PiB7XHJcblx0aWYgKFxyXG5cdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oY3VycmVudFdpbm5pbmdJdGVtLmlkKSA9PT0gbnVsbCB8fFxyXG5cdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oY3VycmVudFdpbm5pbmdJdGVtLmlkKSA9PT0gTmFOXHJcblx0KSB7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjdXJyZW50V2lubmluZ0l0ZW0uaWQsIDEpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcclxuXHRcdFx0Y3VycmVudFdpbm5pbmdJdGVtLmlkLFxyXG5cdFx0XHRwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjdXJyZW50V2lubmluZ0l0ZW0uaWQpKSArIDFcclxuXHRcdCk7XHJcblx0fVxyXG5cdGhpZGVXaW5Qb3B1cCgpO1xyXG59O1xyXG5cclxuY29uc3QgcmVmcmVzaEJhbGFuY2UgPSAoKSA9PiB7XHJcblx0YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKTtcclxuXHRiYWxhbmNlQW1vdW50TW9iaWxlLnRleHRDb250ZW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpO1xyXG59O1xyXG5cclxuY29uc3QgcmVzZXRCb3hBbmltYXRpb24gPSAoKSA9PiB7XHJcbiAgY2FzZUl0ZW1zQm94LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgY2FzZUl0ZW1zQm94LnN0eWxlLnRyYW5zaXRpb249IFwiMC4wMXNcIjtcclxuICBjYXNlSXRlbXNCb3guc3R5bGUubGVmdCA9ICBcIi0zOTUwcHhcIjtcclxuICBjcmVhdGVJdGVtc0luQ2hlc3QoKTtcclxufVxyXG5cclxuc3BpbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3BpbkNhc2UpO1xyXG50YWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0YWtlV2lubmluZ0l0ZW0pO1xyXG5zZWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxsV2lubmluZ0l0ZW0pO1xyXG5cclxuY3JlYXRlSXRlbXNJbkNoZXN0KCk7XHJcbiJdfQ==
